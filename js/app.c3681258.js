(function(e){function t(t){for(var n,r,i=t[0],o=t[1],l=t[2],b=0,m=[];b<i.length;b++)r=i[b],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),c()}function c(){for(var e,t=0;t<a.length;t++){for(var c=a[t],n=!0,i=1;i<c.length;i++){var o=c[i];0!==s[o]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=c[0]))}return e}var n={},s={app:0},a=[];function r(t){if(n[t])return n[t].exports;var c=n[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,r),c.l=!0,c.exports}r.m=e,r.c=n,r.d=function(e,t,c){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(r.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(c,n,function(t){return e[t]}.bind(null,n));return c},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/tabata/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=o;a.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("cd49")},"042c":function(e,t,c){},"3dcc":function(e,t,c){},"520f":function(e,t,c){"use strict";c("f8f5")},"5ac1":function(e,t,c){},"5af8":function(e,t,c){},7429:function(e,t,c){},7704:function(e){e.exports=JSON.parse('{"home":{"total_time":"Общее время","cycles":"Раунды"},"settings":{"title":"Настройки","cycles":"Кругов"},"states":{"prepare":"Подготовка","rest":"Отдых","work":"Работа","pause":"Пауза"},"actions":{"close":"Закрыть","start":"Старт","pause":"Пауза","stop":"Стоп","settings":"Настройки","resume":"Продолжить"},"time_unit":"сек."}')},"8cad":function(e,t,c){"use strict";c("e081")},a02d:function(e,t,c){"use strict";c("5af8")},a12b:function(e,t,c){"use strict";c("5ac1")},b356:function(e,t,c){},b36c:function(e,t,c){"use strict";c("3dcc")},bb60:function(e,t,c){"use strict";c("042c")},bd34:function(e,t,c){},cd49:function(e,t,c){"use strict";c.r(t);var n=c("7a23");function s(e){const t={};return Object.entries(e).forEach(([e,c])=>{"object"===typeof c&&null!==c&&Object.entries(s(c)).forEach(([c,n])=>{t[e+"."+c]=n}),"string"===typeof c&&(t[e]=c)}),t}var a=c("7704");const r=s(a),i=e=>null!=r[e]?r[e]:e,o=()=>({t:i});var l=c("c1ee");function u(e){return localStorage.getItem(e)}function b(e,t){localStorage.setItem(e,t)}var m,p=c("c61a");(function(e){e["home"]="home",e["settings"]="settings"})(m||(m={}));const j={[m.home]:"/",[m.settings]:"/settings/"},O=Object(p["a"])([[j.home,()=>({page:m.home})],[j.settings,()=>({page:m.settings})]]);function d(e,t){switch(!0){case e>t.max:return t.max;case e<t.min:return t.min;default:return e}}var f;(function(e){e[e["changePrepare"]=0]="changePrepare",e[e["changeRest"]=1]="changeRest",e[e["changeWork"]=2]="changeWork",e[e["changeCycles"]=3]="changeCycles"})(f||(f={}));const h={prepare:"prepare",rest:"rest",work:"work",cycles:"cycles"},g={min:0,max:6e4},y={min:0,max:50},_=e=>{const t=u(h.prepare),c=u(h.rest),n=u(h.work),s=u(h.cycles);e.on("@init",()=>({prepare:null!==t?d(Number.parseInt(t),g):2,rest:null!==c?d(Number.parseInt(c),g):20,work:null!==n?d(Number.parseInt(n),g):30,cycles:null!==s?d(Number.parseInt(s),y):8})),e.on(f.changePrepare,(e,t)=>{const c=d(t,g);return b(h.prepare,c.toString()),{prepare:c}}),e.on(f.changeWork,(e,t)=>{const c=d(t,g);return b(h.work,c.toString()),{work:c}}),e.on(f.changeRest,(e,t)=>{const c=d(t,g);return b(h.rest,c.toString()),{rest:c}}),e.on(f.changeCycles,(e,t)=>{const c=d(t,y);return b(h.cycles,c.toString()),{cycles:c}})},v=Object(l["a"])([_,O]),k=Object(n["i"])(v.get());function w(){return{dispatch:v.dispatch,on:v.on,get state(){return k}}}v.on("@changed",(e,t)=>{Object.keys(t).forEach(e=>{"prepare"!==e&&"rest"!==e&&"work"!==e&&"cycles"!==e||(k[e]=t[e])})});const S={id:"app"};function C(e,t,c,s,a,r){const i=Object(n["l"])("home-page"),o=Object(n["l"])("settings-page");return Object(n["h"])(),Object(n["c"])("div",S,[e.hasVisibleHomePage?(Object(n["h"])(),Object(n["c"])(i,{key:0})):Object(n["d"])("",!0),e.hasVisibleSettingsPage?(Object(n["h"])(),Object(n["c"])(o,{key:1})):Object(n["d"])("",!0)])}const P={class:"home__wrap"},V={key:2,class:"home__controls"},T={key:3,class:"home__controls"};function N(e,t,c,s,a,r){const i=Object(n["l"])("home-time-info"),o=Object(n["l"])("home-timer"),l=Object(n["l"])("base-button");return Object(n["h"])(),Object(n["c"])("div",{class:e.classes},[Object(n["f"])("div",P,[e.hasStartTimer?Object(n["d"])("",!0):(Object(n["h"])(),Object(n["c"])(i,{key:0})),e.hasStartTimer?(Object(n["h"])(),Object(n["c"])(o,{key:1,remained:e.remained.time,"remained-cycles":e.remained.cycles,"state-machine":e.sm},null,8,["remained","remained-cycles","state-machine"])):Object(n["d"])("",!0),e.hasStartTimer?Object(n["d"])("",!0):(Object(n["h"])(),Object(n["c"])("div",V,[Object(n["f"])(l,{onClick:e.handleClickSettings},{default:Object(n["n"])(()=>[Object(n["e"])(Object(n["m"])(e.i18n.t("actions.settings")),1)]),_:1},8,["onClick"]),Object(n["f"])(l,{onClick:e.handleClickStart},{default:Object(n["n"])(()=>[Object(n["e"])(Object(n["m"])(e.i18n.t("actions.start")),1)]),_:1},8,["onClick"])])),e.hasStartTimer?(Object(n["h"])(),Object(n["c"])("div",T,[e.hasPauseTimer?(Object(n["h"])(),Object(n["c"])(l,{key:0,onClick:e.handleClickTogglePause},{default:Object(n["n"])(()=>[Object(n["e"])(Object(n["m"])(e.i18n.t("actions.resume")),1)]),_:1},8,["onClick"])):(Object(n["h"])(),Object(n["c"])(l,{key:1,"is-gray":"",onClick:e.handleClickTogglePause},{default:Object(n["n"])(()=>[Object(n["e"])(Object(n["m"])(e.i18n.t("actions.pause")),1)]),_:1},8,["onClick"])),Object(n["f"])(l,{onClick:e.handleClickStop},{default:Object(n["n"])(()=>[Object(n["e"])(Object(n["m"])(e.i18n.t("actions.stop")),1)]),_:1},8,["onClick"])])):Object(n["d"])("",!0)])],2)}function I(e,t,c,s,a,r){return Object(n["h"])(),Object(n["c"])("button",{class:e.classes,onClick:t[1]||(t[1]=(...t)=>e.handleClick(...t))},[Object(n["k"])(e.$slots,"default")],2)}var B=Object(n["g"])({name:"BaseButton",props:{isGray:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const c=Object(n["a"])(()=>({"base-button":!0,"base-button_gray":e.isGray})),s=()=>t("click");return{classes:c,handleClick:s}}});c("a02d");B.render=I;var x,H=B;(function(e){e[e["init"]=0]="init",e[e["pause"]=1]="pause",e[e["prepare"]=2]="prepare",e[e["work"]=3]="work",e[e["rest"]=4]="rest"})(x||(x={}));class M{constructor(){this._state=x.init,this._prevState=x.init}transition(e){this._prevState=this._state,this._state=e}reset(){this._state=x.init,this._prevState=x.init}get state(){return this._state}get prevState(){return this._prevState}}const F={class:"home-time-info"},K={class:"home-time-info__list"},q={class:"home-time-info__item"},R={class:"home-time-info__item"},U={class:"home-time-info__item"},W={class:"home-time-info__item"},D={class:"home-time-info__total"},E={class:"home-time-info__duration"};function J(e,t,c,s,a,r){return Object(n["h"])(),Object(n["c"])("div",F,[Object(n["f"])("ul",K,[Object(n["f"])("li",q,Object(n["m"])(e.i18n.t("states.prepare"))+": "+Object(n["m"])(e.state.prepare)+" "+Object(n["m"])(e.i18n.t("time_unit")),1),Object(n["f"])("li",R,Object(n["m"])(e.i18n.t("states.rest"))+": "+Object(n["m"])(e.state.rest)+" "+Object(n["m"])(e.i18n.t("time_unit")),1),Object(n["f"])("li",U,Object(n["m"])(e.i18n.t("states.work"))+": "+Object(n["m"])(e.state.work)+" "+Object(n["m"])(e.i18n.t("time_unit")),1),Object(n["f"])("li",W,Object(n["m"])(e.i18n.t("settings.cycles"))+": "+Object(n["m"])(e.state.cycles),1)]),Object(n["f"])("div",D,[Object(n["e"])(Object(n["m"])(e.i18n.t("home.total_time"))+": ",1),Object(n["f"])("div",E,Object(n["m"])(e.totalFormatTime),1)])])}function $(e){const t=Math.floor(e/60),c=Math.round(e-60*t),n=t<10?"0"+t:t,s=c<10?"0"+c:c;return[n,s].join(":")}var G=Object(n["g"])({name:"HomeTimeInfo",setup(){const e=w(),t=o(),c=Object(n["a"])(()=>e.state.prepare+e.state.rest*e.state.cycles+e.state.work*e.state.cycles),s=Object(n["a"])(()=>$(c.value));return{i18n:t,total:c,totalFormatTime:s,state:e.state}}});c("520f");G.render=J;var L=G;const z={class:"home-timer"},A={class:"home-timer__title"},Q={class:"home-timer__remained"};function X(e,t,c,s,a,r){const i=Object(n["l"])("home-timer-cycles");return Object(n["h"])(),Object(n["c"])("div",z,[Object(n["f"])("div",A,Object(n["m"])(e.title),1),Object(n["f"])("div",Q,Object(n["m"])(e.remainedFormatTime),1),Object(n["f"])(i,{keep:e.keepCycles,total:e.cycles},null,8,["keep","total"])])}const Y={class:"home-timer-cycles"},Z={class:"home-timer-cycles__title"},ee={class:"home-timer-cycles__keep"},te={class:"home-timer-cycles__total"};function ce(e,t,c,s,a,r){return Object(n["h"])(),Object(n["c"])("div",Y,[Object(n["f"])("div",Z,Object(n["m"])(e.title)+":",1),Object(n["f"])("span",ee,Object(n["m"])(e.keep),1),Object(n["f"])("span",te,"/"+Object(n["m"])(e.total),1)])}var ne=Object(n["g"])({name:"HomeTimerCycles",props:{keep:{type:Number,required:!0},total:{type:Number,required:!0}},setup(){const e=o(),t=e.t("home.cycles");return{title:t}}});c("e202");ne.render=ce;var se=ne,ae=Object(n["g"])({name:"HomeTimer",components:{HomeTimerCycles:se},props:{remained:{type:Number,required:!0},remainedCycles:{type:Number,required:!0},stateMachine:{type:M,required:!0}},setup(e){const t=o(),c=w(),s=Object(n["a"])(()=>c.state.cycles-e.remainedCycles),a=Object(n["a"])(()=>$(e.remained)),r=Object(n["a"])(()=>{switch(e.stateMachine.state){case x.prepare:return t.t("states.prepare");case x.work:return t.t("states.work");case x.rest:return t.t("states.rest");default:return t.t("states.pause")}});return{keepCycles:s,remainedFormatTime:a,title:r,cycles:c.state.cycles}}});c("a12b");ae.render=X;var re=ae;const ie=1e3;var oe=Object(n["g"])({name:"Home",components:{BaseButton:H,HomeTimeInfo:L,HomeTimer:re},setup(){const e=o(),t=w(),{prepare:c,rest:s,work:a,cycles:r}=t.state;let i;const l=Object(n["i"])(new M),u=Object(n["i"])({time:0,cycles:0}),b=Object(n["a"])(()=>l.state!==x.init),m=Object(n["a"])(()=>l.state===x.pause),O=Object(n["a"])(()=>({home:!0,home_start:l.state!==x.init,home_work:l.state===x.work,home_rest:l.state===x.rest}));function d(){if(u.time-=1,!(u.time>0)){if(l.state===x.work)return u.time=s,void l.transition(x.rest);u.time=a,u.cycles-=1,l.transition(x.work),u.cycles<0&&g()}}function f(){i=setInterval(d,ie)}function h(){clearInterval(i)}function g(){l.reset(),h()}const y=()=>{l.transition(x.init),t.dispatch(p["d"],j.settings)},_=()=>{l.transition(x.prepare),u.time=c,u.cycles=r,f()},v=()=>{if(l.state===x.pause)return l.transition(l.prevState),void f();l.transition(x.pause),h()};return{i18n:e,sm:l,remained:u,hasStartTimer:b,hasPauseTimer:m,classes:O,handleClickSettings:y,handleClickStart:_,handleClickStop:g,handleClickTogglePause:v}}});c("bb60");oe.render=N;var le=oe;const ue={class:"settings"},be={class:"settings__wrap"},me={class:"settings__title"},pe={class:"settings__main"},je={class:"settings__note"},Oe={class:"settings__note"},de={class:"settings__note"},fe={class:"settings__controls"};function he(e,t,c,s,a,r){const i=Object(n["l"])("base-input-number"),o=Object(n["l"])("base-field"),l=Object(n["l"])("base-button");return Object(n["h"])(),Object(n["c"])("div",ue,[Object(n["f"])("div",be,[Object(n["f"])("h1",me,Object(n["m"])(e.i18n.t("settings.title")),1),Object(n["f"])("div",pe,[Object(n["f"])(o,{class:"settings__field"},{label:Object(n["n"])(()=>[Object(n["e"])(Object(n["m"])(e.i18n.t("states.prepare")),1),Object(n["f"])("span",je,", "+Object(n["m"])(e.i18n.t("time_unit")),1)]),default:Object(n["n"])(()=>[Object(n["f"])(i,{modelValue:e.prepare,"onUpdate:modelValue":t[1]||(t[1]=t=>e.prepare=t)},null,8,["modelValue"])]),_:1}),Object(n["f"])(o,{class:"settings__field"},{label:Object(n["n"])(()=>[Object(n["e"])(Object(n["m"])(e.i18n.t("states.rest")),1),Object(n["f"])("span",Oe,", "+Object(n["m"])(e.i18n.t("time_unit")),1)]),default:Object(n["n"])(()=>[Object(n["f"])(i,{modelValue:e.rest,"onUpdate:modelValue":t[2]||(t[2]=t=>e.rest=t)},null,8,["modelValue"])]),_:1}),Object(n["f"])(o,{class:"settings__field"},{label:Object(n["n"])(()=>[Object(n["e"])(Object(n["m"])(e.i18n.t("states.work")),1),Object(n["f"])("span",de,", "+Object(n["m"])(e.i18n.t("time_unit")),1)]),default:Object(n["n"])(()=>[Object(n["f"])(i,{modelValue:e.work,"onUpdate:modelValue":t[3]||(t[3]=t=>e.work=t)},null,8,["modelValue"])]),_:1}),Object(n["f"])(o,{class:"settings__field"},{label:Object(n["n"])(()=>[Object(n["e"])(Object(n["m"])(e.i18n.t("settings.cycles")),1)]),default:Object(n["n"])(()=>[Object(n["f"])(i,{modelValue:e.cycles,"onUpdate:modelValue":t[4]||(t[4]=t=>e.cycles=t)},null,8,["modelValue"])]),_:1})]),Object(n["f"])("div",fe,[Object(n["f"])(l,{onClick:e.handleSave},{default:Object(n["n"])(()=>[Object(n["e"])(Object(n["m"])(e.i18n.t("actions.close")),1)]),_:1},8,["onClick"])])])])}const ge={class:"base-field"},ye={class:"base-field__label"};function _e(e,t,c,s,a,r){return Object(n["h"])(),Object(n["c"])("label",ge,[Object(n["f"])("span",ye,[Object(n["k"])(e.$slots,"label")]),Object(n["k"])(e.$slots,"default")])}var ve=Object(n["g"])({name:"BaseField"});c("b36c");ve.render=_e;var ke=ve;function we(e,t,c,s,a,r){return Object(n["h"])(),Object(n["c"])("input",{ref:"input",value:e.modelValue,type:"number",autocomplete:"off",class:"base-input-number",onInput:t[1]||(t[1]=(...t)=>e.handleInput(...t)),onKeydown:t[2]||(t[2]=(...t)=>e.handleKeydown(...t)),onBlur:t[3]||(t[3]=(...t)=>e.handleBlur(...t))},null,40,["value"])}const Se=1;var Ce=Object(n["g"])({name:"BaseInputNumber",props:{modelValue:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const c=Object(n["j"])(null),s=e=>t("update:modelValue",e),a=()=>s(e.modelValue+Se),r=()=>s(e.modelValue-Se);function i(e){const t=/\d+/.exec(e.target.value);null!==t&&s(Number.parseInt(t[0],10))}function o(e){const t=e.key.toLowerCase();return"arrowup"===t||"up"===t?(a(),void e.preventDefault()):"arrowdown"===t||"down"===t?(r(),void e.preventDefault()):void("e"!==t||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault())}function l(){null!==c.value&&(c.value.value=e.modelValue.toString())}return{input:c,handleInput:i,handleKeydown:o,handleBlur:l}}});c("cf4a");Ce.render=we;var Pe=Ce,Ve=Object(n["g"])({name:"Settings",components:{BaseButton:H,BaseField:ke,BaseInputNumber:Pe},setup(){const e=w(),t=o(),c=Object(n["a"])({get:()=>e.state.prepare,set:t=>e.dispatch(f.changePrepare,t)}),s=Object(n["a"])({get:()=>e.state.rest,set:t=>e.dispatch(f.changeRest,t)}),a=Object(n["a"])({get:()=>e.state.work,set:t=>e.dispatch(f.changeWork,t)}),r=Object(n["a"])({get:()=>e.state.cycles,set:t=>e.dispatch(f.changeCycles,t)}),i=()=>e.dispatch(p["d"],j.home);return{i18n:t,prepare:c,rest:s,work:a,cycles:r,handleSave:i}}});c("8cad");Ve.render=he;var Te=Ve;function Ne(){const e=Object(n["j"])(""),t=t=>{e.value=!1===t.match?"":t.match.page};return{pageName:e,setPageName:t}}var Ie=Object(n["g"])({components:{HomePage:le,SettingsPage:Te},setup(){const e=w(),{pageName:t,setPageName:c}=Ne();c(e.state[p["c"]]),e.on(p["b"],(e,t)=>{c(t)});const s=Object(n["a"])(()=>t.value===m.home),a=Object(n["a"])(()=>t.value===m.settings);return{hasVisibleHomePage:s,hasVisibleSettingsPage:a}}});c("d8fe");Ie.render=C;var Be=Ie;c("f95d");Object(n["b"])(Be).mount("#app")},cf4a:function(e,t,c){"use strict";c("b356")},d8fe:function(e,t,c){"use strict";c("bd34")},e081:function(e,t,c){},e202:function(e,t,c){"use strict";c("7429")},f8f5:function(e,t,c){},f95d:function(e,t,c){}});