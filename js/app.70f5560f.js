(function(e){function t(t){for(var n,r,o=t[0],i=t[1],l=t[2],b=0,m=[];b<o.length;b++)r=o[b],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),c()}function c(){for(var e,t=0;t<a.length;t++){for(var c=a[t],n=!0,o=1;o<c.length;o++){var i=c[o];0!==s[i]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=c[0]))}return e}var n={},s={app:0},a=[];function r(t){if(n[t])return n[t].exports;var c=n[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,r),c.l=!0,c.exports}r.m=e,r.c=n,r.d=function(e,t,c){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(r.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(c,n,function(t){return e[t]}.bind(null,n));return c},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/tabata/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=i;a.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("cd49")},"042c":function(e,t,c){},"3dcc":function(e,t,c){},"520f":function(e,t,c){"use strict";c("f8f5")},"5ac1":function(e,t,c){},"5af8":function(e,t,c){},7429:function(e,t,c){},7704:function(e){e.exports=JSON.parse('{"home":{"total_time":"Общее время","cycles":"Раунды"},"settings":{"title":"Настройки","cycles":"Кругов"},"states":{"prepare":"Подготовка","rest":"Отдых","work":"Работа","pause":"Пауза"},"actions":{"close":"Закрыть","start":"Старт","pause":"Пауза","stop":"Стоп","settings":"Настройки","resume":"Продолжить"},"time_unit":"сек."}')},"8cad":function(e,t,c){"use strict";c("e081")},a02d:function(e,t,c){"use strict";c("5af8")},a12b:function(e,t,c){"use strict";c("5ac1")},b356:function(e,t,c){},b36c:function(e,t,c){"use strict";c("3dcc")},bb60:function(e,t,c){"use strict";c("042c")},bd34:function(e,t,c){},cd49:function(e,t,c){"use strict";c.r(t);var n=c("7a23");const s={id:"app"};function a(e,t,c,a,r,o){const i=Object(n["t"])("router-view");return Object(n["o"])(),Object(n["c"])("div",s,[Object(n["f"])(i)])}c("d8fe");const r={};r.render=a;var o=r;function i(e){const t={};return Object.entries(e).forEach(([e,c])=>{"object"===typeof c&&null!==c&&Object.entries(i(c)).forEach(([c,n])=>{t[e+"."+c]=n}),"string"===typeof c&&(t[e]=c)}),t}var l=c("7704");const u=i(l),b=e=>null!=u[e]?u[e]:e,m=()=>({t:b}),O={install:e=>{e.config.globalProperties.$t=b}};var j=c("6c02");const p={class:"home__wrap"},f={key:2,class:"home__controls"},d={key:3,class:"home__controls"};function v(e,t,c,s,a,r){const o=Object(n["t"])("home-time-info"),i=Object(n["t"])("home-timer"),l=Object(n["t"])("base-button");return Object(n["o"])(),Object(n["c"])("div",{class:e.classes},[Object(n["f"])("div",p,[e.hasStartTimer?Object(n["d"])("",!0):(Object(n["o"])(),Object(n["c"])(o,{key:0})),e.hasStartTimer?(Object(n["o"])(),Object(n["c"])(i,{key:1,remained:e.remained.time,"remained-cycles":e.remained.cycles,"state-machine":e.sm},null,8,["remained","remained-cycles","state-machine"])):Object(n["d"])("",!0),e.hasStartTimer?Object(n["d"])("",!0):(Object(n["o"])(),Object(n["c"])("div",f,[Object(n["f"])(l,{onClick:e.handleClickSettings},{default:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("actions.settings")),1)]),_:1},8,["onClick"]),Object(n["f"])(l,{onClick:e.handleClickStart},{default:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("actions.start")),1)]),_:1},8,["onClick"])])),e.hasStartTimer?(Object(n["o"])(),Object(n["c"])("div",d,[e.hasPauseTimer?(Object(n["o"])(),Object(n["c"])(l,{key:0,onClick:e.handleClickTogglePause},{default:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("actions.resume")),1)]),_:1},8,["onClick"])):(Object(n["o"])(),Object(n["c"])(l,{key:1,"is-gray":"",onClick:e.handleClickTogglePause},{default:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("actions.pause")),1)]),_:1},8,["onClick"])),Object(n["f"])(l,{onClick:e.handleClickStop},{default:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("actions.stop")),1)]),_:1},8,["onClick"])])):Object(n["d"])("",!0)])],2)}var h=c("5502");function _(e,t,c,s,a,r){return Object(n["o"])(),Object(n["c"])("button",{class:e.classes,onClick:t[1]||(t[1]=(...t)=>e.handleClick(...t))},[Object(n["s"])(e.$slots,"default")],2)}var y=Object(n["g"])({name:"BaseButton",props:{isGray:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const c=Object(n["a"])(()=>({"base-button":!0,"base-button_gray":e.isGray})),s=()=>t("click");return{classes:c,handleClick:s}}});c("a02d");y.render=_;var g,k=y;(function(e){e[e["init"]=0]="init",e[e["pause"]=1]="pause",e[e["prepare"]=2]="prepare",e[e["work"]=3]="work",e[e["rest"]=4]="rest"})(g||(g={}));class w{constructor(){this._state=g.init,this._prevState=g.init}transition(e){this._prevState=this._state,this._state=e}reset(){this._state=g.init,this._prevState=g.init}get state(){return this._state}get prevState(){return this._prevState}}const S={home:"home",settings:"settings"},C={class:"home-time-info"},T={class:"home-time-info__list"},V={class:"home-time-info__item"},$={class:"home-time-info__item"},I={class:"home-time-info__item"},z={class:"home-time-info__item"},B={class:"home-time-info__total"},P={class:"home-time-info__duration"};function N(e,t,c,s,a,r){return Object(n["o"])(),Object(n["c"])("div",C,[Object(n["f"])("ul",T,[Object(n["f"])("li",V,Object(n["v"])(e.i18n.t("states.prepare"))+": "+Object(n["v"])(e.state.prepare)+" "+Object(n["v"])(e.i18n.t("time_unit")),1),Object(n["f"])("li",$,Object(n["v"])(e.i18n.t("states.rest"))+": "+Object(n["v"])(e.state.rest)+" "+Object(n["v"])(e.i18n.t("time_unit")),1),Object(n["f"])("li",I,Object(n["v"])(e.i18n.t("states.work"))+": "+Object(n["v"])(e.state.work)+" "+Object(n["v"])(e.i18n.t("time_unit")),1),Object(n["f"])("li",z,Object(n["v"])(e.i18n.t("settings.cycles"))+": "+Object(n["v"])(e.state.cycles),1)]),Object(n["f"])("div",B,[Object(n["e"])(Object(n["v"])(e.i18n.t("home.total_time"))+": ",1),Object(n["f"])("div",P,Object(n["v"])(e.totalFormatTime),1)])])}function x(e){const t=Math.floor(e/60),c=Math.round(e-60*t),n=t<10?"0"+t:t,s=c<10?"0"+c:c;return[n,s].join(":")}var M=Object(n["g"])({name:"HomeTimeInfo",setup(){const e=Object(h["b"])(),t=m(),c=Object(n["a"])(()=>e.state.prepare+e.state.rest*e.state.cycles+e.state.work*e.state.cycles),s=Object(n["a"])(()=>x(c.value));return{i18n:t,total:c,totalFormatTime:s,state:e.state}}});c("520f");M.render=N;var q=M;const H={class:"home-timer"},F={class:"home-timer__title"},K={class:"home-timer__remained"};function U(e,t,c,s,a,r){const o=Object(n["t"])("home-timer-cycles");return Object(n["o"])(),Object(n["c"])("div",H,[Object(n["f"])("div",F,Object(n["v"])(e.title),1),Object(n["f"])("div",K,Object(n["v"])(e.remainedFormatTime),1),Object(n["f"])(o,{keep:e.keepCycles,total:e.cycles},null,8,["keep","total"])])}const D={class:"home-timer-cycles"},J={class:"home-timer-cycles__title"},E={class:"home-timer-cycles__keep"},G={class:"home-timer-cycles__total"};function L(e,t,c,s,a,r){return Object(n["o"])(),Object(n["c"])("div",D,[Object(n["f"])("div",J,Object(n["v"])(e.title)+":",1),Object(n["f"])("span",E,Object(n["v"])(e.keep),1),Object(n["f"])("span",G,"/"+Object(n["v"])(e.total),1)])}var R=Object(n["g"])({name:"HomeTimerCycles",props:{keep:{type:Number,required:!0},total:{type:Number,required:!0}},setup(){const e=m(),t=e.t("home.cycles");return{title:t}}});c("e202");R.render=L;var W=R,A=Object(n["g"])({name:"HomeTimer",components:{HomeTimerCycles:W},props:{remained:{type:Number,required:!0},remainedCycles:{type:Number,required:!0},stateMachine:{type:w,required:!0}},setup(e){const t=m(),c=Object(h["b"])(),s=Object(n["a"])(()=>c.state.cycles-e.remainedCycles),a=Object(n["a"])(()=>x(e.remained)),r=Object(n["a"])(()=>{switch(e.stateMachine.state){case g.prepare:return t.t("states.prepare");case g.work:return t.t("states.work");case g.rest:return t.t("states.rest");default:return t.t("states.pause")}});return{keepCycles:s,remainedFormatTime:a,title:r,cycles:c.state.cycles}}});c("a12b");A.render=U;var Q=A;const X=1e3;var Y=Object(n["g"])({name:"Home",components:{BaseButton:k,HomeTimeInfo:q,HomeTimer:Q},setup(){const e=Object(j["c"])(),t=Object(h["b"])(),{prepare:c,rest:s,work:a,cycles:r}=t.state;let o;const i=Object(n["q"])(new w),l=Object(n["q"])({time:0,cycles:0}),u=Object(n["a"])(()=>i.state!==g.init),b=Object(n["a"])(()=>i.state===g.pause),m=Object(n["a"])(()=>({home:!0,home_start:i.state!==g.init,home_work:i.state===g.work,home_rest:i.state===g.rest}));function O(){if(l.time-=1,!(l.time>0)){if(i.state===g.work)return l.time=s,void i.transition(g.rest);l.time=a,l.cycles-=1,i.transition(g.work),l.cycles<0&&d()}}function p(){o=setInterval(O,X)}function f(){clearInterval(o)}function d(){i.reset(),f()}const v=()=>{i.transition(g.init),e.push({name:S.settings})},_=()=>{i.transition(g.prepare),l.time=c,l.cycles=r,p()},y=()=>{if(i.state===g.pause)return i.transition(i.prevState),void p();i.transition(g.pause),f()};return{sm:i,remained:l,hasStartTimer:u,hasPauseTimer:b,classes:m,handleClickSettings:v,handleClickStart:_,handleClickStop:d,handleClickTogglePause:y}}});c("bb60");Y.render=v;var Z=Y;const ee={class:"settings"},te={class:"settings__wrap"},ce={class:"settings__title"},ne={class:"settings__main"},se={class:"settings__note"},ae={class:"settings__note"},re={class:"settings__note"},oe={class:"settings__controls"};function ie(e,t,c,s,a,r){const o=Object(n["t"])("base-input-number"),i=Object(n["t"])("base-field"),l=Object(n["t"])("base-button");return Object(n["o"])(),Object(n["c"])("div",ee,[Object(n["f"])("div",te,[Object(n["f"])("h1",ce,Object(n["v"])(e.$t("settings.title")),1),Object(n["f"])("div",ne,[Object(n["f"])(i,{class:"settings__field"},{label:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("states.prepare")),1),Object(n["f"])("span",se,", "+Object(n["v"])(e.$t("time_unit")),1)]),default:Object(n["z"])(()=>[Object(n["f"])(o,{modelValue:e.prepare,"onUpdate:modelValue":t[1]||(t[1]=t=>e.prepare=t)},null,8,["modelValue"])]),_:1}),Object(n["f"])(i,{class:"settings__field"},{label:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("states.rest")),1),Object(n["f"])("span",ae,", "+Object(n["v"])(e.$t("time_unit")),1)]),default:Object(n["z"])(()=>[Object(n["f"])(o,{modelValue:e.rest,"onUpdate:modelValue":t[2]||(t[2]=t=>e.rest=t)},null,8,["modelValue"])]),_:1}),Object(n["f"])(i,{class:"settings__field"},{label:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("states.work")),1),Object(n["f"])("span",re,", "+Object(n["v"])(e.$t("time_unit")),1)]),default:Object(n["z"])(()=>[Object(n["f"])(o,{modelValue:e.work,"onUpdate:modelValue":t[3]||(t[3]=t=>e.work=t)},null,8,["modelValue"])]),_:1}),Object(n["f"])(i,{class:"settings__field"},{label:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("settings.cycles")),1)]),default:Object(n["z"])(()=>[Object(n["f"])(o,{modelValue:e.cycles,"onUpdate:modelValue":t[4]||(t[4]=t=>e.cycles=t)},null,8,["modelValue"])]),_:1})]),Object(n["f"])("div",oe,[Object(n["f"])(l,{onClick:e.handleSave},{default:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("actions.close")),1)]),_:1},8,["onClick"])])])])}const le={class:"base-field"},ue={class:"base-field__label"};function be(e,t,c,s,a,r){return Object(n["o"])(),Object(n["c"])("label",le,[Object(n["f"])("span",ue,[Object(n["s"])(e.$slots,"label")]),Object(n["s"])(e.$slots,"default")])}var me=Object(n["g"])({name:"BaseField"});c("b36c");me.render=be;var Oe=me;function je(e,t,c,s,a,r){return Object(n["o"])(),Object(n["c"])("input",{ref:"input",value:e.modelValue,type:"number",autocomplete:"off",class:"base-input-number",onInput:t[1]||(t[1]=(...t)=>e.handleInput(...t)),onKeydown:t[2]||(t[2]=(...t)=>e.handleKeydown(...t)),onBlur:t[3]||(t[3]=(...t)=>e.handleBlur(...t))},null,40,["value"])}const pe=1;var fe=Object(n["g"])({name:"BaseInputNumber",props:{modelValue:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const c=Object(n["r"])(null),s=e=>t("update:modelValue",e),a=()=>s(e.modelValue+pe),r=()=>s(e.modelValue-pe);function o(e){const t=/\d+/.exec(e.target.value);null!==t&&s(Number.parseInt(t[0],10))}function i(e){const t=e.key.toLowerCase();return"arrowup"===t||"up"===t?(a(),void e.preventDefault()):"arrowdown"===t||"down"===t?(r(),void e.preventDefault()):void("e"!==t||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault())}function l(){null!==c.value&&(c.value.value=e.modelValue.toString())}return{input:c,handleInput:o,handleKeydown:i,handleBlur:l}}});c("cf4a");fe.render=je;var de=fe;const ve="changePrepare",he="changeRest",_e="changeWork",ye="changeCycles";var ge=Object(n["g"])({name:"Settings",components:{BaseButton:k,BaseField:Oe,BaseInputNumber:de},setup(){const e=Object(h["b"])(),t=Object(j["c"])(),c=Object(n["a"])({get:()=>e.state.prepare,set:t=>e.commit(ve,t)}),s=Object(n["a"])({get:()=>e.state.rest,set:t=>e.commit(he,t)}),a=Object(n["a"])({get:()=>e.state.work,set:t=>e.commit(_e,t)}),r=Object(n["a"])({get:()=>e.state.cycles,set:t=>e.commit(ye,t)}),o=()=>t.push({name:S.home});return{prepare:c,rest:s,work:a,cycles:r,handleSave:o}}});c("8cad");ge.render=ie;var ke=ge;const we=Object(j["a"])({history:Object(j["b"])("/tabata/"),routes:[{path:"/",name:S.home,component:Z},{path:"/settings/",name:S.settings,component:ke}]});function Se(e){return localStorage.getItem(e)}function Ce(e,t){localStorage.setItem(e,t)}function Te(e,t){switch(!0){case e>t.max:return t.max;case e<t.min:return t.min;default:return e}}const Ve={prepare:"prepare",rest:"rest",work:"work",cycles:"cycles"},$e={min:0,max:6e4},Ie={min:0,max:50},ze=Object(h["a"])({state:()=>{const e=Se(Ve.prepare),t=Se(Ve.rest),c=Se(Ve.work),n=Se(Ve.cycles);return{prepare:null!==e?Te(Number.parseInt(e),$e):2,rest:null!==t?Te(Number.parseInt(t),$e):20,work:null!==c?Te(Number.parseInt(c),$e):30,cycles:null!==n?Te(Number.parseInt(n),Ie):8}},mutations:{[ve](e,t){const c=Te(t,$e);e.prepare=c,Ce(Ve.prepare,c.toString())},[he](e,t){const c=Te(t,$e);e.rest=c,Ce(Ve.rest,c.toString())},[_e](e,t){const c=Te(t,$e);e.work=c,Ce(Ve.work,c.toString())},[ye](e,t){const c=Te(t,Ie);e.cycles=c,Ce(Ve.cycles,c.toString())}}});c("f95d");Object(n["b"])(o).use(O).use(we).use(ze).mount("#app")},cf4a:function(e,t,c){"use strict";c("b356")},d8fe:function(e,t,c){"use strict";c("bd34")},e081:function(e,t,c){},e202:function(e,t,c){"use strict";c("7429")},f8f5:function(e,t,c){},f95d:function(e,t,c){}});