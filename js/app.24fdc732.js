(function(e){function t(t){for(var n,r,i=t[0],o=t[1],l=t[2],b=0,m=[];b<i.length;b++)r=i[b],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),c()}function c(){for(var e,t=0;t<a.length;t++){for(var c=a[t],n=!0,i=1;i<c.length;i++){var o=c[i];0!==s[o]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=c[0]))}return e}var n={},s={app:0},a=[];function r(t){if(n[t])return n[t].exports;var c=n[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,r),c.l=!0,c.exports}r.m=e,r.c=n,r.d=function(e,t,c){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(r.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(c,n,function(t){return e[t]}.bind(null,n));return c},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/tabata/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=o;a.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("cd49")},"042c":function(e,t,c){},"3dcc":function(e,t,c){},"520f":function(e,t,c){"use strict";c("f8f5")},"5ac1":function(e,t,c){},"5af8":function(e,t,c){},7429:function(e,t,c){},7704:function(e){e.exports=JSON.parse('{"home":{"total_time":"Общее время","cycles":"Раунды"},"settings":{"title":"Настройки","cycles":"Кругов"},"states":{"prepare":"Подготовка","rest":"Отдых","work":"Работа","pause":"Пауза"},"actions":{"close":"Закрыть","start":"Старт","pause":"Пауза","stop":"Стоп","settings":"Настройки","resume":"Продолжить"},"time_unit":"сек."}')},"8cad":function(e,t,c){"use strict";c("e081")},a02d:function(e,t,c){"use strict";c("5af8")},a12b:function(e,t,c){"use strict";c("5ac1")},b356:function(e,t,c){},b36c:function(e,t,c){"use strict";c("3dcc")},bb60:function(e,t,c){"use strict";c("042c")},bd34:function(e,t,c){},cd49:function(e,t,c){"use strict";c.r(t);var n=c("7a23");function s(e){const t={};return Object.entries(e).forEach(([e,c])=>{"object"===typeof c&&null!==c&&Object.entries(s(c)).forEach(([c,n])=>{t[e+"."+c]=n}),"string"===typeof c&&(t[e]=c)}),t}var a=c("7704");const r=s(a),i=e=>null!=r[e]?r[e]:e,o=()=>({t:i});var l,u=c("c1ee");function b(e){return localStorage.getItem(e)}function m(e,t){localStorage.setItem(e,t)}function p(e,t){switch(!0){case e>t.max:return t.max;case e<t.min:return t.min;default:return e}}(function(e){e[e["changePrepare"]=0]="changePrepare",e[e["changeRest"]=1]="changeRest",e[e["changeWork"]=2]="changeWork",e[e["changeCycles"]=3]="changeCycles"})(l||(l={}));const O={prepare:"prepare",rest:"rest",work:"work",cycles:"cycles"},j={min:0,max:6e4},f={min:0,max:50},d=e=>{const t=b(O.prepare),c=b(O.rest),n=b(O.work),s=b(O.cycles);e.on("@init",()=>({prepare:null!==t?p(Number.parseInt(t),j):2,rest:null!==c?p(Number.parseInt(c),j):20,work:null!==n?p(Number.parseInt(n),j):30,cycles:null!==s?p(Number.parseInt(s),f):8})),e.on(l.changePrepare,(e,t)=>{const c=p(t,j);return m(O.prepare,c.toString()),{prepare:c}}),e.on(l.changeWork,(e,t)=>{const c=p(t,j);return m(O.work,c.toString()),{work:c}}),e.on(l.changeRest,(e,t)=>{const c=p(t,j);return m(O.rest,c.toString()),{rest:c}}),e.on(l.changeCycles,(e,t)=>{const c=p(t,f);return m(O.cycles,c.toString()),{cycles:c}})},h=Object(u["a"])([d]),v=Object(n["q"])(h.get());function y(){return{dispatch:h.dispatch,get state(){return v}}}h.on("@changed",(e,t)=>{Object.keys(t).forEach(e=>{["prepare","rest","work","cycles"].includes(e)&&(v[e]=t[e])})});const _={id:"app"};function g(e,t,c,s,a,r){const i=Object(n["t"])("router-view");return Object(n["o"])(),Object(n["c"])("div",_,[Object(n["f"])(i)])}c("d8fe");const k={};k.render=g;var w=k,C=c("6c02");const S={class:"home__wrap"},T={key:2,class:"home__controls"},V={key:3,class:"home__controls"};function I(e,t,c,s,a,r){const i=Object(n["t"])("home-time-info"),o=Object(n["t"])("home-timer"),l=Object(n["t"])("base-button");return Object(n["o"])(),Object(n["c"])("div",{class:e.classes},[Object(n["f"])("div",S,[e.hasStartTimer?Object(n["d"])("",!0):(Object(n["o"])(),Object(n["c"])(i,{key:0})),e.hasStartTimer?(Object(n["o"])(),Object(n["c"])(o,{key:1,remained:e.remained.time,"remained-cycles":e.remained.cycles,"state-machine":e.sm},null,8,["remained","remained-cycles","state-machine"])):Object(n["d"])("",!0),e.hasStartTimer?Object(n["d"])("",!0):(Object(n["o"])(),Object(n["c"])("div",T,[Object(n["f"])(l,{onClick:e.handleClickSettings},{default:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.i18n.t("actions.settings")),1)]),_:1},8,["onClick"]),Object(n["f"])(l,{onClick:e.handleClickStart},{default:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.i18n.t("actions.start")),1)]),_:1},8,["onClick"])])),e.hasStartTimer?(Object(n["o"])(),Object(n["c"])("div",V,[e.hasPauseTimer?(Object(n["o"])(),Object(n["c"])(l,{key:0,onClick:e.handleClickTogglePause},{default:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.i18n.t("actions.resume")),1)]),_:1},8,["onClick"])):(Object(n["o"])(),Object(n["c"])(l,{key:1,"is-gray":"",onClick:e.handleClickTogglePause},{default:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.i18n.t("actions.pause")),1)]),_:1},8,["onClick"])),Object(n["f"])(l,{onClick:e.handleClickStop},{default:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.i18n.t("actions.stop")),1)]),_:1},8,["onClick"])])):Object(n["d"])("",!0)])],2)}function P(e,t,c,s,a,r){return Object(n["o"])(),Object(n["c"])("button",{class:e.classes,onClick:t[1]||(t[1]=(...t)=>e.handleClick(...t))},[Object(n["s"])(e.$slots,"default")],2)}var z=Object(n["g"])({name:"BaseButton",props:{isGray:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const c=Object(n["a"])(()=>({"base-button":!0,"base-button_gray":e.isGray})),s=()=>t("click");return{classes:c,handleClick:s}}});c("a02d");z.render=P;var B,N=z;(function(e){e[e["init"]=0]="init",e[e["pause"]=1]="pause",e[e["prepare"]=2]="prepare",e[e["work"]=3]="work",e[e["rest"]=4]="rest"})(B||(B={}));class x{constructor(){this._state=B.init,this._prevState=B.init}transition(e){this._prevState=this._state,this._state=e}reset(){this._state=B.init,this._prevState=B.init}get state(){return this._state}get prevState(){return this._prevState}}const q={home:"home",settings:"settings"},M={class:"home-time-info"},H={class:"home-time-info__list"},F={class:"home-time-info__item"},K={class:"home-time-info__item"},R={class:"home-time-info__item"},U={class:"home-time-info__item"},W={class:"home-time-info__total"},D={class:"home-time-info__duration"};function E(e,t,c,s,a,r){return Object(n["o"])(),Object(n["c"])("div",M,[Object(n["f"])("ul",H,[Object(n["f"])("li",F,Object(n["v"])(e.i18n.t("states.prepare"))+": "+Object(n["v"])(e.state.prepare)+" "+Object(n["v"])(e.i18n.t("time_unit")),1),Object(n["f"])("li",K,Object(n["v"])(e.i18n.t("states.rest"))+": "+Object(n["v"])(e.state.rest)+" "+Object(n["v"])(e.i18n.t("time_unit")),1),Object(n["f"])("li",R,Object(n["v"])(e.i18n.t("states.work"))+": "+Object(n["v"])(e.state.work)+" "+Object(n["v"])(e.i18n.t("time_unit")),1),Object(n["f"])("li",U,Object(n["v"])(e.i18n.t("settings.cycles"))+": "+Object(n["v"])(e.state.cycles),1)]),Object(n["f"])("div",W,[Object(n["e"])(Object(n["v"])(e.i18n.t("home.total_time"))+": ",1),Object(n["f"])("div",D,Object(n["v"])(e.totalFormatTime),1)])])}function J(e){const t=Math.floor(e/60),c=Math.round(e-60*t),n=t<10?"0"+t:t,s=c<10?"0"+c:c;return[n,s].join(":")}var $=Object(n["g"])({name:"HomeTimeInfo",setup(){const e=y(),t=o(),c=Object(n["a"])(()=>e.state.prepare+e.state.rest*e.state.cycles+e.state.work*e.state.cycles),s=Object(n["a"])(()=>J(c.value));return{i18n:t,total:c,totalFormatTime:s,state:e.state}}});c("520f");$.render=E;var G=$;const L={class:"home-timer"},A={class:"home-timer__title"},Q={class:"home-timer__remained"};function X(e,t,c,s,a,r){const i=Object(n["t"])("home-timer-cycles");return Object(n["o"])(),Object(n["c"])("div",L,[Object(n["f"])("div",A,Object(n["v"])(e.title),1),Object(n["f"])("div",Q,Object(n["v"])(e.remainedFormatTime),1),Object(n["f"])(i,{keep:e.keepCycles,total:e.cycles},null,8,["keep","total"])])}const Y={class:"home-timer-cycles"},Z={class:"home-timer-cycles__title"},ee={class:"home-timer-cycles__keep"},te={class:"home-timer-cycles__total"};function ce(e,t,c,s,a,r){return Object(n["o"])(),Object(n["c"])("div",Y,[Object(n["f"])("div",Z,Object(n["v"])(e.title)+":",1),Object(n["f"])("span",ee,Object(n["v"])(e.keep),1),Object(n["f"])("span",te,"/"+Object(n["v"])(e.total),1)])}var ne=Object(n["g"])({name:"HomeTimerCycles",props:{keep:{type:Number,required:!0},total:{type:Number,required:!0}},setup(){const e=o(),t=e.t("home.cycles");return{title:t}}});c("e202");ne.render=ce;var se=ne,ae=Object(n["g"])({name:"HomeTimer",components:{HomeTimerCycles:se},props:{remained:{type:Number,required:!0},remainedCycles:{type:Number,required:!0},stateMachine:{type:x,required:!0}},setup(e){const t=o(),c=y(),s=Object(n["a"])(()=>c.state.cycles-e.remainedCycles),a=Object(n["a"])(()=>J(e.remained)),r=Object(n["a"])(()=>{switch(e.stateMachine.state){case B.prepare:return t.t("states.prepare");case B.work:return t.t("states.work");case B.rest:return t.t("states.rest");default:return t.t("states.pause")}});return{keepCycles:s,remainedFormatTime:a,title:r,cycles:c.state.cycles}}});c("a12b");ae.render=X;var re=ae;const ie=1e3;var oe=Object(n["g"])({name:"Home",components:{BaseButton:N,HomeTimeInfo:G,HomeTimer:re},setup(){const e=Object(C["c"])(),t=o(),c=y(),{prepare:s,rest:a,work:r,cycles:i}=c.state;let l;const u=Object(n["q"])(new x),b=Object(n["q"])({time:0,cycles:0}),m=Object(n["a"])(()=>u.state!==B.init),p=Object(n["a"])(()=>u.state===B.pause),O=Object(n["a"])(()=>({home:!0,home_start:u.state!==B.init,home_work:u.state===B.work,home_rest:u.state===B.rest}));function j(){if(b.time-=1,!(b.time>0)){if(u.state===B.work)return b.time=a,void u.transition(B.rest);b.time=r,b.cycles-=1,u.transition(B.work),b.cycles<0&&h()}}function f(){l=setInterval(j,ie)}function d(){clearInterval(l)}function h(){u.reset(),d()}const v=()=>{u.transition(B.init),e.push({name:q.settings})},_=()=>{u.transition(B.prepare),b.time=s,b.cycles=i,f()},g=()=>{if(u.state===B.pause)return u.transition(u.prevState),void f();u.transition(B.pause),d()};return{i18n:t,sm:u,remained:b,hasStartTimer:m,hasPauseTimer:p,classes:O,handleClickSettings:v,handleClickStart:_,handleClickStop:h,handleClickTogglePause:g}}});c("bb60");oe.render=I;var le=oe;const ue={class:"settings"},be={class:"settings__wrap"},me={class:"settings__title"},pe={class:"settings__main"},Oe={class:"settings__note"},je={class:"settings__note"},fe={class:"settings__note"},de={class:"settings__controls"};function he(e,t,c,s,a,r){const i=Object(n["t"])("base-input-number"),o=Object(n["t"])("base-field"),l=Object(n["t"])("base-button");return Object(n["o"])(),Object(n["c"])("div",ue,[Object(n["f"])("div",be,[Object(n["f"])("h1",me,Object(n["v"])(e.i18n.t("settings.title")),1),Object(n["f"])("div",pe,[Object(n["f"])(o,{class:"settings__field"},{label:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.i18n.t("states.prepare")),1),Object(n["f"])("span",Oe,", "+Object(n["v"])(e.i18n.t("time_unit")),1)]),default:Object(n["z"])(()=>[Object(n["f"])(i,{modelValue:e.prepare,"onUpdate:modelValue":t[1]||(t[1]=t=>e.prepare=t)},null,8,["modelValue"])]),_:1}),Object(n["f"])(o,{class:"settings__field"},{label:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.i18n.t("states.rest")),1),Object(n["f"])("span",je,", "+Object(n["v"])(e.i18n.t("time_unit")),1)]),default:Object(n["z"])(()=>[Object(n["f"])(i,{modelValue:e.rest,"onUpdate:modelValue":t[2]||(t[2]=t=>e.rest=t)},null,8,["modelValue"])]),_:1}),Object(n["f"])(o,{class:"settings__field"},{label:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.i18n.t("states.work")),1),Object(n["f"])("span",fe,", "+Object(n["v"])(e.i18n.t("time_unit")),1)]),default:Object(n["z"])(()=>[Object(n["f"])(i,{modelValue:e.work,"onUpdate:modelValue":t[3]||(t[3]=t=>e.work=t)},null,8,["modelValue"])]),_:1}),Object(n["f"])(o,{class:"settings__field"},{label:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.i18n.t("settings.cycles")),1)]),default:Object(n["z"])(()=>[Object(n["f"])(i,{modelValue:e.cycles,"onUpdate:modelValue":t[4]||(t[4]=t=>e.cycles=t)},null,8,["modelValue"])]),_:1})]),Object(n["f"])("div",de,[Object(n["f"])(l,{onClick:e.handleSave},{default:Object(n["z"])(()=>[Object(n["e"])(Object(n["v"])(e.i18n.t("actions.close")),1)]),_:1},8,["onClick"])])])])}const ve={class:"base-field"},ye={class:"base-field__label"};function _e(e,t,c,s,a,r){return Object(n["o"])(),Object(n["c"])("label",ve,[Object(n["f"])("span",ye,[Object(n["s"])(e.$slots,"label")]),Object(n["s"])(e.$slots,"default")])}var ge=Object(n["g"])({name:"BaseField"});c("b36c");ge.render=_e;var ke=ge;function we(e,t,c,s,a,r){return Object(n["o"])(),Object(n["c"])("input",{ref:"input",value:e.modelValue,type:"number",autocomplete:"off",class:"base-input-number",onInput:t[1]||(t[1]=(...t)=>e.handleInput(...t)),onKeydown:t[2]||(t[2]=(...t)=>e.handleKeydown(...t)),onBlur:t[3]||(t[3]=(...t)=>e.handleBlur(...t))},null,40,["value"])}const Ce=1;var Se=Object(n["g"])({name:"BaseInputNumber",props:{modelValue:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const c=Object(n["r"])(null),s=e=>t("update:modelValue",e),a=()=>s(e.modelValue+Ce),r=()=>s(e.modelValue-Ce);function i(e){const t=/\d+/.exec(e.target.value);null!==t&&s(Number.parseInt(t[0],10))}function o(e){const t=e.key.toLowerCase();return"arrowup"===t||"up"===t?(a(),void e.preventDefault()):"arrowdown"===t||"down"===t?(r(),void e.preventDefault()):void("e"!==t||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault())}function l(){null!==c.value&&(c.value.value=e.modelValue.toString())}return{input:c,handleInput:i,handleKeydown:o,handleBlur:l}}});c("cf4a");Se.render=we;var Te=Se,Ve=Object(n["g"])({name:"Settings",components:{BaseButton:N,BaseField:ke,BaseInputNumber:Te},setup(){const e=y(),t=Object(C["c"])(),c=o(),s=Object(n["a"])({get:()=>e.state.prepare,set:t=>e.dispatch(l.changePrepare,t)}),a=Object(n["a"])({get:()=>e.state.rest,set:t=>e.dispatch(l.changeRest,t)}),r=Object(n["a"])({get:()=>e.state.work,set:t=>e.dispatch(l.changeWork,t)}),i=Object(n["a"])({get:()=>e.state.cycles,set:t=>e.dispatch(l.changeCycles,t)}),u=()=>t.push({name:q.home});return{i18n:c,prepare:s,rest:a,work:r,cycles:i,handleSave:u}}});c("8cad");Ve.render=he;var Ie=Ve;const Pe=Object(C["a"])({history:Object(C["b"])("/tabata/"),routes:[{path:"/",name:q.home,component:le},{path:"/settings/",name:q.settings,component:Ie}]});c("f95d");Object(n["b"])(w).use(Pe).mount("#app")},cf4a:function(e,t,c){"use strict";c("b356")},d8fe:function(e,t,c){"use strict";c("bd34")},e081:function(e,t,c){},e202:function(e,t,c){"use strict";c("7429")},f8f5:function(e,t,c){},f95d:function(e,t,c){}});