(function(e){function t(t){for(var c,i,r=t[0],o=t[1],l=t[2],b=0,m=[];b<r.length;b++)i=r[b],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],c=!0,r=1;r<s.length;r++){var o=s[r];0!==n[o]&&(c=!1)}c&&(a.splice(t--,1),e=i(i.s=s[0]))}return e}var c={},n={app:0},a=[];function i(t){if(c[t])return c[t].exports;var s=c[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=c,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)i.d(s,c,function(t){return e[t]}.bind(null,c));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/tabata/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=o;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"042c":function(e,t,s){},"3dcc":function(e,t,s){},"520f":function(e,t,s){"use strict";s("f8f5")},"5ac1":function(e,t,s){},"5af8":function(e,t,s){},7429:function(e,t,s){},7704:function(e){e.exports=JSON.parse('{"home":{"total_time":"Общее время","cycles":"Раунды"},"settings":{"title":"Настройки","cycles":"Кругов"},"states":{"prepare":"Подготовка","rest":"Отдых","work":"Работа","pause":"Пауза"},"actions":{"close":"Закрыть","start":"Старт","pause":"Пауза","stop":"Стоп","settings":"Настройки","resume":"Продолжить"},"time_unit":"сек."}')},"8cad":function(e,t,s){"use strict";s("e081")},a02d:function(e,t,s){"use strict";s("5af8")},a12b:function(e,t,s){"use strict";s("5ac1")},b356:function(e,t,s){},b36c:function(e,t,s){"use strict";s("3dcc")},bb60:function(e,t,s){"use strict";s("042c")},bd34:function(e,t,s){},cd49:function(e,t,s){"use strict";s.r(t);var c=s("7a23");const n={id:"app"};function a(e,t,s,a,i,r){const o=Object(c["x"])("router-view");return Object(c["s"])(),Object(c["e"])("div",n,[Object(c["h"])(o)])}s("d8fe");const i={};i.render=a;var r=i,o=s("ab42"),l=s("7704");const u=(()=>Object(o["a"])({locale:null!=Object({NODE_ENV:"production",BASE_URL:"/tabata/"}).VUE_APP_I18N_LOCALE?Object({NODE_ENV:"production",BASE_URL:"/tabata/"}).VUE_APP_I18N_LOCALE:"ru",fallbackLocale:null!=Object({NODE_ENV:"production",BASE_URL:"/tabata/"}).VUE_APP_I18N_FALLBACK_LOCALE?Object({NODE_ENV:"production",BASE_URL:"/tabata/"}).VUE_APP_I18N_FALLBACK_LOCALE:"ru",messages:{ru:l}}))();var b=s("6c02");const m={class:"home__wrap"},h={key:2,class:"home__controls"},O={key:3,class:"home__controls"};function d(e,t,s,n,a,i){const r=Object(c["x"])("home-time-info"),o=Object(c["x"])("home-timer"),l=Object(c["x"])("base-button");return Object(c["s"])(),Object(c["e"])("div",{class:e.classes},[Object(c["h"])("div",m,[e.hasStartTimer?Object(c["f"])("",!0):(Object(c["s"])(),Object(c["e"])(r,{key:0})),e.hasStartTimer?(Object(c["s"])(),Object(c["e"])(o,{key:1,remained:e.remained.time,"remained-cycles":e.remained.cycles,"state-machine":e.sm},null,8,["remained","remained-cycles","state-machine"])):Object(c["f"])("",!0),e.hasStartTimer?Object(c["f"])("",!0):(Object(c["s"])(),Object(c["e"])("div",h,[Object(c["h"])(l,{onClick:e.handleClickSettings},{default:Object(c["E"])(()=>[Object(c["g"])(Object(c["z"])(e.$t("actions.settings")),1)]),_:1},8,["onClick"]),Object(c["h"])(l,{onClick:e.handleClickStart},{default:Object(c["E"])(()=>[Object(c["g"])(Object(c["z"])(e.$t("actions.start")),1)]),_:1},8,["onClick"])])),e.hasStartTimer?(Object(c["s"])(),Object(c["e"])("div",O,[e.hasPauseTimer?(Object(c["s"])(),Object(c["e"])(l,{key:0,onClick:e.handleClickTogglePause},{default:Object(c["E"])(()=>[Object(c["g"])(Object(c["z"])(e.$t("actions.resume")),1)]),_:1},8,["onClick"])):(Object(c["s"])(),Object(c["e"])(l,{key:1,"is-gray":"",onClick:e.handleClickTogglePause},{default:Object(c["E"])(()=>[Object(c["g"])(Object(c["z"])(e.$t("actions.pause")),1)]),_:1},8,["onClick"])),Object(c["h"])(l,{onClick:e.handleClickStop},{default:Object(c["E"])(()=>[Object(c["g"])(Object(c["z"])(e.$t("actions.stop")),1)]),_:1},8,["onClick"])])):Object(c["f"])("",!0)])],2)}var j=s("5502");function p(e,t,s,n,a,i){return Object(c["s"])(),Object(c["e"])("button",{class:e.classes,onClick:t[1]||(t[1]=(...t)=>e.handleClick(...t))},[Object(c["w"])(e.$slots,"default")],2)}var y=Object(c["i"])({name:"BaseButton",props:{isGray:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const s=Object(c["c"])(()=>({"base-button":!0,"base-button_gray":e.isGray})),n=()=>t("click");return{classes:s,handleClick:n}}});s("a02d");y.render=p;var f,_=y;(function(e){e[e["init"]=0]="init",e[e["pause"]=1]="pause",e[e["prepare"]=2]="prepare",e[e["work"]=3]="work",e[e["rest"]=4]="rest"})(f||(f={}));class g{constructor(){this._state=f.init,this._prevState=f.init}transition(e){this._prevState=this._state,this._state=e}reset(){this._state=f.init,this._prevState=f.init}get state(){return this._state}get prevState(){return this._prevState}}const k={home:"home",settings:"settings"},v={class:"home-time-info"},C={class:"home-time-info__list"},w={class:"home-time-info__item"},S={class:"home-time-info__item"},q={class:"home-time-info__item"},E={class:"home-time-info__item"},z={class:"home-time-info__total"},V={class:"home-time-info__duration"};function N(e,t,s,n,a,i){return Object(c["s"])(),Object(c["e"])("div",v,[Object(c["h"])("ul",C,[Object(c["h"])("li",w,Object(c["z"])(e.i18n.t("states.prepare"))+": "+Object(c["z"])(e.state.prepare)+" "+Object(c["z"])(e.i18n.t("time_unit")),1),Object(c["h"])("li",S,Object(c["z"])(e.i18n.t("states.rest"))+": "+Object(c["z"])(e.state.rest)+" "+Object(c["z"])(e.i18n.t("time_unit")),1),Object(c["h"])("li",q,Object(c["z"])(e.i18n.t("states.work"))+": "+Object(c["z"])(e.state.work)+" "+Object(c["z"])(e.i18n.t("time_unit")),1),Object(c["h"])("li",E,Object(c["z"])(e.i18n.t("settings.cycles"))+": "+Object(c["z"])(e.state.cycles),1)]),Object(c["h"])("div",z,[Object(c["g"])(Object(c["z"])(e.i18n.t("home.total_time"))+": ",1),Object(c["h"])("div",V,Object(c["z"])(e.totalFormatTime),1)])])}function x(e){const t=Math.floor(e/60),s=Math.round(e-60*t),c=t<10?"0"+t:t,n=s<10?"0"+s:s;return[c,n].join(":")}var T=Object(c["i"])({name:"HomeTimeInfo",setup(){const e=Object(j["b"])(),t=Object(o["b"])(),s=Object(c["c"])(()=>e.state.prepare+e.state.rest*e.state.cycles+e.state.work*e.state.cycles),n=Object(c["c"])(()=>x(s.value));return{i18n:t,total:s,totalFormatTime:n,state:e.state}}});s("520f");T.render=N;var B=T;const K={class:"home-timer"},P={class:"home-timer__title"},$={class:"home-timer__remained"};function L(e,t,s,n,a,i){const r=Object(c["x"])("home-timer-cycles");return Object(c["s"])(),Object(c["e"])("div",K,[Object(c["h"])("div",P,Object(c["z"])(e.title),1),Object(c["h"])("div",$,Object(c["z"])(e.remainedFormatTime),1),Object(c["h"])(r,{keep:e.keepCycles,total:e.cycles},null,8,["keep","total"])])}const A={class:"home-timer-cycles"},I={class:"home-timer-cycles__title"},U={class:"home-timer-cycles__keep"},F={class:"home-timer-cycles__total"};function M(e,t,s,n,a,i){return Object(c["s"])(),Object(c["e"])("div",A,[Object(c["h"])("div",I,Object(c["z"])(e.title)+":",1),Object(c["h"])("span",U,Object(c["z"])(e.keep),1),Object(c["h"])("span",F,"/"+Object(c["z"])(e.total),1)])}var D=Object(c["i"])({name:"HomeTimerCycles",props:{keep:{type:Number,required:!0},total:{type:Number,required:!0}},setup(){const e=Object(o["b"])(),t=e.t("home.cycles");return{title:t}}});s("e202");D.render=M;var H=D,R=Object(c["i"])({name:"HomeTimer",components:{HomeTimerCycles:H},props:{remained:{type:Number,required:!0},remainedCycles:{type:Number,required:!0},stateMachine:{type:g,required:!0}},setup(e){const t=Object(o["b"])(),s=Object(j["b"])(),n=Object(c["c"])(()=>s.state.cycles-e.remainedCycles),a=Object(c["c"])(()=>x(e.remained)),i=Object(c["c"])(()=>{switch(e.stateMachine.state){case f.prepare:return t.t("states.prepare");case f.work:return t.t("states.work");case f.rest:return t.t("states.rest");default:return t.t("states.pause")}});return{keepCycles:n,remainedFormatTime:a,title:i,cycles:s.state.cycles}}});s("a12b");R.render=L;var J=R;const Q=1e3;var G=Object(c["i"])({name:"Home",components:{BaseButton:_,HomeTimeInfo:B,HomeTimer:J},setup(){const e=Object(b["c"])(),t=Object(j["b"])(),{prepare:s,rest:n,work:a,cycles:i}=t.state;let r;const o=Object(c["u"])(new g),l=Object(c["u"])({time:0,cycles:0}),u=Object(c["c"])(()=>o.state!==f.init),m=Object(c["c"])(()=>o.state===f.pause),h=Object(c["c"])(()=>({home:!0,home_start:o.state!==f.init,home_work:o.state===f.work,home_rest:o.state===f.rest}));function O(){if(l.time-=1,!(l.time>0)){if(o.state===f.work)return l.time=n,void o.transition(f.rest);l.time=a,l.cycles-=1,o.transition(f.work),l.cycles<0&&y()}}function d(){r=setInterval(O,Q)}function p(){clearInterval(r)}function y(){o.reset(),p()}const _=()=>{o.transition(f.init),e.push({name:k.settings})},v=()=>{o.transition(f.prepare),l.time=s,l.cycles=i,d()},C=()=>{if(o.state===f.pause)return o.transition(o.prevState),void d();o.transition(f.pause),p()};return{sm:o,remained:l,hasStartTimer:u,hasPauseTimer:m,classes:h,handleClickSettings:_,handleClickStart:v,handleClickStop:y,handleClickTogglePause:C}}});s("bb60");G.render=d;var W=G;const X={class:"settings"},Y={class:"settings__wrap"},Z={class:"settings__title"},ee={class:"settings__main"},te={class:"settings__note"},se={class:"settings__note"},ce={class:"settings__note"},ne={class:"settings__controls"};function ae(e,t,s,n,a,i){const r=Object(c["x"])("base-input-number"),o=Object(c["x"])("base-field"),l=Object(c["x"])("base-button");return Object(c["s"])(),Object(c["e"])("div",X,[Object(c["h"])("div",Y,[Object(c["h"])("h1",Z,Object(c["z"])(e.$t("settings.title")),1),Object(c["h"])("div",ee,[Object(c["h"])(o,{class:"settings__field"},{label:Object(c["E"])(()=>[Object(c["g"])(Object(c["z"])(e.$t("states.prepare")),1),Object(c["h"])("span",te,", "+Object(c["z"])(e.$t("time_unit")),1)]),default:Object(c["E"])(()=>[Object(c["h"])(r,{modelValue:e.prepare,"onUpdate:modelValue":t[1]||(t[1]=t=>e.prepare=t)},null,8,["modelValue"])]),_:1}),Object(c["h"])(o,{class:"settings__field"},{label:Object(c["E"])(()=>[Object(c["g"])(Object(c["z"])(e.$t("states.rest")),1),Object(c["h"])("span",se,", "+Object(c["z"])(e.$t("time_unit")),1)]),default:Object(c["E"])(()=>[Object(c["h"])(r,{modelValue:e.rest,"onUpdate:modelValue":t[2]||(t[2]=t=>e.rest=t)},null,8,["modelValue"])]),_:1}),Object(c["h"])(o,{class:"settings__field"},{label:Object(c["E"])(()=>[Object(c["g"])(Object(c["z"])(e.$t("states.work")),1),Object(c["h"])("span",ce,", "+Object(c["z"])(e.$t("time_unit")),1)]),default:Object(c["E"])(()=>[Object(c["h"])(r,{modelValue:e.work,"onUpdate:modelValue":t[3]||(t[3]=t=>e.work=t)},null,8,["modelValue"])]),_:1}),Object(c["h"])(o,{class:"settings__field"},{label:Object(c["E"])(()=>[Object(c["g"])(Object(c["z"])(e.$t("settings.cycles")),1)]),default:Object(c["E"])(()=>[Object(c["h"])(r,{modelValue:e.cycles,"onUpdate:modelValue":t[4]||(t[4]=t=>e.cycles=t)},null,8,["modelValue"])]),_:1})]),Object(c["h"])("div",ne,[Object(c["h"])(l,{onClick:e.handleSave},{default:Object(c["E"])(()=>[Object(c["g"])(Object(c["z"])(e.$t("actions.close")),1)]),_:1},8,["onClick"])])])])}const ie={class:"base-field"},re={class:"base-field__label"};function oe(e,t,s,n,a,i){return Object(c["s"])(),Object(c["e"])("label",ie,[Object(c["h"])("span",re,[Object(c["w"])(e.$slots,"label")]),Object(c["w"])(e.$slots,"default")])}var le=Object(c["i"])({name:"BaseField"});s("b36c");le.render=oe;var ue=le;function be(e,t,s,n,a,i){return Object(c["F"])((Object(c["s"])(),Object(c["e"])("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.quantity=t),type:"number",maxlength:e.maxlength,autocomplete:"off",class:"base-input-number",onKeyup:t[2]||(t[2]=(...t)=>e.handleKeyup(...t)),onKeydown:t[3]||(t[3]=(...t)=>e.handleKeydown(...t)),onBlur:t[4]||(t[4]=(...t)=>e.handleBlur(...t))},null,40,["maxlength"])),[[c["B"],e.quantity,void 0,{number:!0}]])}var me=Object(c["i"])({name:"BaseInputNumber",props:{modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:1e11},step:{type:Number,default:1},maxlength:{type:Number,default:4}},emits:["update:modelValue"],data:({modelValue:e})=>({quantity:e,oldValue:e,isKeydown:!1}),watch:{quantity:function(){this.evaluateQuantity()},min:function(e){this.quantity<e&&(this.quantity=e)},max:function(e){this.quantity>e&&(this.quantity=e)}},mounted(){this.emitChange(!0)},methods:{emitChange(e=!1){this.oldValue=this.quantity,e&&(this.quantity=this.modelValue<this.min?this.min:this.modelValue),this.$emit("update:modelValue",this.quantity)},increment(){this.quantity?this.quantity=this.quantity<this.max?this.quantity+this.step:this.max:this.quantity=this.min},decrement(){this.quantity?this.quantity=this.quantity>this.min?this.quantity-this.step:this.min:this.quantity=this.min},evaluateQuantity(){this.isKeydown||this.quantity.toString().length>0&&this.quantity!==this.oldValue&&this.emitChange()},handleBlur(){0!==this.quantity.toString().length?(this.quantity<this.min&&(this.quantity=this.min),this.quantity>this.max&&(this.quantity=this.max)):this.quantity=this.oldValue},handleKeyup(){this.isKeydown=!1,this.evaluateQuantity()},handleKeydown(e){return this.isKeydown=!0,38===e.keyCode?(this.increment(),void e.preventDefault()):40===e.keyCode?(this.decrement(),void e.preventDefault()):void([46,8,9,27,13].includes(e.keyCode)||65===e.keyCode&&(e.ctrlKey||e.metaKey)||67===e.keyCode&&(e.ctrlKey||e.metaKey)||82===e.keyCode&&(e.ctrlKey||e.metaKey)||88===e.keyCode&&(e.ctrlKey||e.metaKey)||e.keyCode>=35&&e.keyCode<=39||(110===e.keyCode||190===e.keyCode||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105))&&e.preventDefault())}}});s("cf4a");me.render=be;var he=me;const Oe="changePrepare",de="changeRest",je="changeWork",pe="changeCycles";var ye=Object(c["i"])({name:"Settings",components:{BaseButton:_,BaseField:ue,BaseInputNumber:he},setup(){const e=Object(j["b"])(),t=Object(b["c"])(),s=Object(c["c"])({get:()=>e.state.prepare,set:t=>e.commit(Oe,t)}),n=Object(c["c"])({get:()=>e.state.rest,set:t=>e.commit(de,t)}),a=Object(c["c"])({get:()=>e.state.work,set:t=>e.commit(je,t)}),i=Object(c["c"])({get:()=>e.state.cycles,set:t=>e.commit(pe,t)}),r=()=>t.push({name:k.home});return{prepare:s,rest:n,work:a,cycles:i,handleSave:r}}});s("8cad");ye.render=ae;var fe=ye;const _e=Object(b["a"])({history:Object(b["b"])("/tabata/"),routes:[{path:"/",name:k.home,component:W},{path:"/settings/",name:k.settings,component:fe}]});function ge(e){return localStorage.getItem(e)}function ke(e,t){localStorage.setItem(e,t)}const ve={prepare:"prepare",rest:"rest",work:"work",cycles:"cycles"},Ce=Object(j["a"])({state:()=>{const e=ge(ve.prepare),t=ge(ve.rest),s=ge(ve.work),c=ge(ve.cycles);return{prepare:null!==e?Number.parseInt(e,10):2,rest:null!==t?Number.parseInt(t,10):20,work:null!==s?Number.parseInt(s,10):30,cycles:null!==c?Number.parseInt(c,10):8}},mutations:{[Oe](e,t){e.prepare=t,ke(ve.prepare,t.toString())},[de](e,t){e.rest=t,ke(ve.rest,t.toString())},[je](e,t){e.work=t,ke(ve.work,t.toString())},[pe](e,t){e.cycles=t,ke(ve.cycles,t.toString())}}});s("f95d");Object(c["d"])(r).use(u).use(_e).use(Ce).mount("#app")},cf4a:function(e,t,s){"use strict";s("b356")},d8fe:function(e,t,s){"use strict";s("bd34")},e081:function(e,t,s){},e202:function(e,t,s){"use strict";s("7429")},f8f5:function(e,t,s){},f95d:function(e,t,s){}});