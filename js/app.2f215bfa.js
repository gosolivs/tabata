(function(e){function t(t){for(var n,i,r=t[0],o=t[1],l=t[2],b=0,m=[];b<r.length;b++)i=r[b],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&m.push(c[i][0]),c[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],n=!0,r=1;r<s.length;r++){var o=s[r];0!==c[o]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=s[0]))}return e}var n={},c={app:0},a=[];function i(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=n,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/tabata/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=o;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"042c":function(e,t,s){},"3dcc":function(e,t,s){},"520f":function(e,t,s){"use strict";s("f8f5")},"5ac1":function(e,t,s){},"5af8":function(e,t,s){},7429:function(e,t,s){},7704:function(e){e.exports=JSON.parse('{"home":{"total_time":"Общее время","cycles":"Раунды"},"settings":{"title":"Настройки","cycles":"Кругов"},"states":{"prepare":"Подготовка","rest":"Отдых","work":"Работа","pause":"Пауза"},"actions":{"close":"Закрыть","start":"Старт","pause":"Пауза","stop":"Стоп","settings":"Настройки","resume":"Продолжить"},"time_unit":"сек."}')},"8cad":function(e,t,s){"use strict";s("e081")},a02d:function(e,t,s){"use strict";s("5af8")},a12b:function(e,t,s){"use strict";s("5ac1")},b356:function(e,t,s){},b36c:function(e,t,s){"use strict";s("3dcc")},bb60:function(e,t,s){"use strict";s("042c")},bd34:function(e,t,s){},cd49:function(e,t,s){"use strict";s.r(t);var n=s("7a23");const c={id:"app"};function a(e,t,s,a,i,r){const o=Object(n["t"])("router-view");return Object(n["o"])(),Object(n["c"])("div",c,[Object(n["f"])(o)])}s("d8fe");const i={};i.render=a;var r=i;function o(e){const t={};return Object.entries(e).forEach(([e,s])=>{"object"===typeof s&&null!==s&&Object.entries(o(s)).forEach(([s,n])=>{t[e+"."+s]=n}),"string"===typeof s&&(t[e]=s)}),t}var l=s("7704");const u=o(l),b=e=>null!=u[e]?u[e]:e,m=()=>({t:b}),d={install:e=>{e.config.globalProperties.$t=b}};var O=s("6c02");const j={class:"home__wrap"},p={key:2,class:"home__controls"},f={key:3,class:"home__controls"};function h(e,t,s,c,a,i){const r=Object(n["t"])("home-time-info"),o=Object(n["t"])("home-timer"),l=Object(n["t"])("base-button");return Object(n["o"])(),Object(n["c"])("div",{class:e.classes},[Object(n["f"])("div",j,[e.hasStartTimer?Object(n["d"])("",!0):(Object(n["o"])(),Object(n["c"])(r,{key:0})),e.hasStartTimer?(Object(n["o"])(),Object(n["c"])(o,{key:1,remained:e.remained.time,"remained-cycles":e.remained.cycles,"state-machine":e.sm},null,8,["remained","remained-cycles","state-machine"])):Object(n["d"])("",!0),e.hasStartTimer?Object(n["d"])("",!0):(Object(n["o"])(),Object(n["c"])("div",p,[Object(n["f"])(l,{onClick:e.handleClickSettings},{default:Object(n["A"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("actions.settings")),1)]),_:1},8,["onClick"]),Object(n["f"])(l,{onClick:e.handleClickStart},{default:Object(n["A"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("actions.start")),1)]),_:1},8,["onClick"])])),e.hasStartTimer?(Object(n["o"])(),Object(n["c"])("div",f,[e.hasPauseTimer?(Object(n["o"])(),Object(n["c"])(l,{key:0,onClick:e.handleClickTogglePause},{default:Object(n["A"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("actions.resume")),1)]),_:1},8,["onClick"])):(Object(n["o"])(),Object(n["c"])(l,{key:1,"is-gray":"",onClick:e.handleClickTogglePause},{default:Object(n["A"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("actions.pause")),1)]),_:1},8,["onClick"])),Object(n["f"])(l,{onClick:e.handleClickStop},{default:Object(n["A"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("actions.stop")),1)]),_:1},8,["onClick"])])):Object(n["d"])("",!0)])],2)}var y=s("5502");function v(e,t,s,c,a,i){return Object(n["o"])(),Object(n["c"])("button",{class:e.classes,onClick:t[1]||(t[1]=(...t)=>e.handleClick(...t))},[Object(n["s"])(e.$slots,"default")],2)}var _=Object(n["g"])({name:"BaseButton",props:{isGray:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const s=Object(n["a"])(()=>({"base-button":!0,"base-button_gray":e.isGray})),c=()=>t("click");return{classes:s,handleClick:c}}});s("a02d");_.render=v;var g,k=_;(function(e){e[e["init"]=0]="init",e[e["pause"]=1]="pause",e[e["prepare"]=2]="prepare",e[e["work"]=3]="work",e[e["rest"]=4]="rest"})(g||(g={}));class C{constructor(){this._state=g.init,this._prevState=g.init}transition(e){this._prevState=this._state,this._state=e}reset(){this._state=g.init,this._prevState=g.init}get state(){return this._state}get prevState(){return this._prevState}}const w={home:"home",settings:"settings"},q={class:"home-time-info"},S={class:"home-time-info__list"},V={class:"home-time-info__item"},T={class:"home-time-info__item"},K={class:"home-time-info__item"},$={class:"home-time-info__item"},x={class:"home-time-info__total"},N={class:"home-time-info__duration"};function B(e,t,s,c,a,i){return Object(n["o"])(),Object(n["c"])("div",q,[Object(n["f"])("ul",S,[Object(n["f"])("li",V,Object(n["v"])(e.i18n.t("states.prepare"))+": "+Object(n["v"])(e.state.prepare)+" "+Object(n["v"])(e.i18n.t("time_unit")),1),Object(n["f"])("li",T,Object(n["v"])(e.i18n.t("states.rest"))+": "+Object(n["v"])(e.state.rest)+" "+Object(n["v"])(e.i18n.t("time_unit")),1),Object(n["f"])("li",K,Object(n["v"])(e.i18n.t("states.work"))+": "+Object(n["v"])(e.state.work)+" "+Object(n["v"])(e.i18n.t("time_unit")),1),Object(n["f"])("li",$,Object(n["v"])(e.i18n.t("settings.cycles"))+": "+Object(n["v"])(e.state.cycles),1)]),Object(n["f"])("div",x,[Object(n["e"])(Object(n["v"])(e.i18n.t("home.total_time"))+": ",1),Object(n["f"])("div",N,Object(n["v"])(e.totalFormatTime),1)])])}function A(e){const t=Math.floor(e/60),s=Math.round(e-60*t),n=t<10?"0"+t:t,c=s<10?"0"+s:s;return[n,c].join(":")}var P=Object(n["g"])({name:"HomeTimeInfo",setup(){const e=Object(y["b"])(),t=m(),s=Object(n["a"])(()=>e.state.prepare+e.state.rest*e.state.cycles+e.state.work*e.state.cycles),c=Object(n["a"])(()=>A(s.value));return{i18n:t,total:s,totalFormatTime:c,state:e.state}}});s("520f");P.render=B;var I=P;const M={class:"home-timer"},H={class:"home-timer__title"},F={class:"home-timer__remained"};function U(e,t,s,c,a,i){const r=Object(n["t"])("home-timer-cycles");return Object(n["o"])(),Object(n["c"])("div",M,[Object(n["f"])("div",H,Object(n["v"])(e.title),1),Object(n["f"])("div",F,Object(n["v"])(e.remainedFormatTime),1),Object(n["f"])(r,{keep:e.keepCycles,total:e.cycles},null,8,["keep","total"])])}const D={class:"home-timer-cycles"},J={class:"home-timer-cycles__title"},Q={class:"home-timer-cycles__keep"},E={class:"home-timer-cycles__total"};function G(e,t,s,c,a,i){return Object(n["o"])(),Object(n["c"])("div",D,[Object(n["f"])("div",J,Object(n["v"])(e.title)+":",1),Object(n["f"])("span",Q,Object(n["v"])(e.keep),1),Object(n["f"])("span",E,"/"+Object(n["v"])(e.total),1)])}var R=Object(n["g"])({name:"HomeTimerCycles",props:{keep:{type:Number,required:!0},total:{type:Number,required:!0}},setup(){const e=m(),t=e.t("home.cycles");return{title:t}}});s("e202");R.render=G;var W=R,z=Object(n["g"])({name:"HomeTimer",components:{HomeTimerCycles:W},props:{remained:{type:Number,required:!0},remainedCycles:{type:Number,required:!0},stateMachine:{type:C,required:!0}},setup(e){const t=m(),s=Object(y["b"])(),c=Object(n["a"])(()=>s.state.cycles-e.remainedCycles),a=Object(n["a"])(()=>A(e.remained)),i=Object(n["a"])(()=>{switch(e.stateMachine.state){case g.prepare:return t.t("states.prepare");case g.work:return t.t("states.work");case g.rest:return t.t("states.rest");default:return t.t("states.pause")}});return{keepCycles:c,remainedFormatTime:a,title:i,cycles:s.state.cycles}}});s("a12b");z.render=U;var L=z;const X=1e3;var Y=Object(n["g"])({name:"Home",components:{BaseButton:k,HomeTimeInfo:I,HomeTimer:L},setup(){const e=Object(O["c"])(),t=Object(y["b"])(),{prepare:s,rest:c,work:a,cycles:i}=t.state;let r;const o=Object(n["q"])(new C),l=Object(n["q"])({time:0,cycles:0}),u=Object(n["a"])(()=>o.state!==g.init),b=Object(n["a"])(()=>o.state===g.pause),m=Object(n["a"])(()=>({home:!0,home_start:o.state!==g.init,home_work:o.state===g.work,home_rest:o.state===g.rest}));function d(){if(l.time-=1,!(l.time>0)){if(o.state===g.work)return l.time=c,void o.transition(g.rest);l.time=a,l.cycles-=1,o.transition(g.work),l.cycles<0&&f()}}function j(){r=setInterval(d,X)}function p(){clearInterval(r)}function f(){o.reset(),p()}const h=()=>{o.transition(g.init),e.push({name:w.settings})},v=()=>{o.transition(g.prepare),l.time=s,l.cycles=i,j()},_=()=>{if(o.state===g.pause)return o.transition(o.prevState),void j();o.transition(g.pause),p()};return{sm:o,remained:l,hasStartTimer:u,hasPauseTimer:b,classes:m,handleClickSettings:h,handleClickStart:v,handleClickStop:f,handleClickTogglePause:_}}});s("bb60");Y.render=h;var Z=Y;const ee={class:"settings"},te={class:"settings__wrap"},se={class:"settings__title"},ne={class:"settings__main"},ce={class:"settings__note"},ae={class:"settings__note"},ie={class:"settings__note"},re={class:"settings__controls"};function oe(e,t,s,c,a,i){const r=Object(n["t"])("base-input-number"),o=Object(n["t"])("base-field"),l=Object(n["t"])("base-button");return Object(n["o"])(),Object(n["c"])("div",ee,[Object(n["f"])("div",te,[Object(n["f"])("h1",se,Object(n["v"])(e.$t("settings.title")),1),Object(n["f"])("div",ne,[Object(n["f"])(o,{class:"settings__field"},{label:Object(n["A"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("states.prepare")),1),Object(n["f"])("span",ce,", "+Object(n["v"])(e.$t("time_unit")),1)]),default:Object(n["A"])(()=>[Object(n["f"])(r,{modelValue:e.prepare,"onUpdate:modelValue":t[1]||(t[1]=t=>e.prepare=t)},null,8,["modelValue"])]),_:1}),Object(n["f"])(o,{class:"settings__field"},{label:Object(n["A"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("states.rest")),1),Object(n["f"])("span",ae,", "+Object(n["v"])(e.$t("time_unit")),1)]),default:Object(n["A"])(()=>[Object(n["f"])(r,{modelValue:e.rest,"onUpdate:modelValue":t[2]||(t[2]=t=>e.rest=t)},null,8,["modelValue"])]),_:1}),Object(n["f"])(o,{class:"settings__field"},{label:Object(n["A"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("states.work")),1),Object(n["f"])("span",ie,", "+Object(n["v"])(e.$t("time_unit")),1)]),default:Object(n["A"])(()=>[Object(n["f"])(r,{modelValue:e.work,"onUpdate:modelValue":t[3]||(t[3]=t=>e.work=t)},null,8,["modelValue"])]),_:1}),Object(n["f"])(o,{class:"settings__field"},{label:Object(n["A"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("settings.cycles")),1)]),default:Object(n["A"])(()=>[Object(n["f"])(r,{modelValue:e.cycles,"onUpdate:modelValue":t[4]||(t[4]=t=>e.cycles=t)},null,8,["modelValue"])]),_:1})]),Object(n["f"])("div",re,[Object(n["f"])(l,{onClick:e.handleSave},{default:Object(n["A"])(()=>[Object(n["e"])(Object(n["v"])(e.$t("actions.close")),1)]),_:1},8,["onClick"])])])])}const le={class:"base-field"},ue={class:"base-field__label"};function be(e,t,s,c,a,i){return Object(n["o"])(),Object(n["c"])("label",le,[Object(n["f"])("span",ue,[Object(n["s"])(e.$slots,"label")]),Object(n["s"])(e.$slots,"default")])}var me=Object(n["g"])({name:"BaseField"});s("b36c");me.render=be;var de=me;function Oe(e,t,s,c,a,i){return Object(n["B"])((Object(n["o"])(),Object(n["c"])("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.quantity=t),type:"number",maxlength:e.maxlength,autocomplete:"off",class:"base-input-number",onKeyup:t[2]||(t[2]=(...t)=>e.handleKeyup(...t)),onKeydown:t[3]||(t[3]=(...t)=>e.handleKeydown(...t)),onBlur:t[4]||(t[4]=(...t)=>e.handleBlur(...t))},null,40,["maxlength"])),[[n["x"],e.quantity,void 0,{number:!0}]])}var je=Object(n["g"])({name:"BaseInputNumber",props:{modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:1e11},step:{type:Number,default:1},maxlength:{type:Number,default:4}},emits:["update:modelValue"],data:({modelValue:e})=>({quantity:e,oldValue:e,isKeydown:!1}),watch:{quantity:function(){this.evaluateQuantity()},min:function(e){this.quantity<e&&(this.quantity=e)},max:function(e){this.quantity>e&&(this.quantity=e)}},mounted(){this.emitChange(!0)},methods:{emitChange(e=!1){this.oldValue=this.quantity,e&&(this.quantity=this.modelValue<this.min?this.min:this.modelValue),this.$emit("update:modelValue",this.quantity)},increment(){this.quantity?this.quantity=this.quantity<this.max?this.quantity+this.step:this.max:this.quantity=this.min},decrement(){this.quantity?this.quantity=this.quantity>this.min?this.quantity-this.step:this.min:this.quantity=this.min},evaluateQuantity(){this.isKeydown||this.quantity.toString().length>0&&this.quantity!==this.oldValue&&this.emitChange()},handleBlur(){0!==this.quantity.toString().length?(this.quantity<this.min&&(this.quantity=this.min),this.quantity>this.max&&(this.quantity=this.max)):this.quantity=this.oldValue},handleKeyup(){this.isKeydown=!1,this.evaluateQuantity()},handleKeydown(e){return this.isKeydown=!0,38===e.keyCode?(this.increment(),void e.preventDefault()):40===e.keyCode?(this.decrement(),void e.preventDefault()):void([46,8,9,27,13].includes(e.keyCode)||65===e.keyCode&&(e.ctrlKey||e.metaKey)||67===e.keyCode&&(e.ctrlKey||e.metaKey)||82===e.keyCode&&(e.ctrlKey||e.metaKey)||88===e.keyCode&&(e.ctrlKey||e.metaKey)||e.keyCode>=35&&e.keyCode<=39||(110===e.keyCode||190===e.keyCode||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105))&&e.preventDefault())}}});s("cf4a");je.render=Oe;var pe=je;const fe="changePrepare",he="changeRest",ye="changeWork",ve="changeCycles";var _e=Object(n["g"])({name:"Settings",components:{BaseButton:k,BaseField:de,BaseInputNumber:pe},setup(){const e=Object(y["b"])(),t=Object(O["c"])(),s=Object(n["a"])({get:()=>e.state.prepare,set:t=>e.commit(fe,t)}),c=Object(n["a"])({get:()=>e.state.rest,set:t=>e.commit(he,t)}),a=Object(n["a"])({get:()=>e.state.work,set:t=>e.commit(ye,t)}),i=Object(n["a"])({get:()=>e.state.cycles,set:t=>e.commit(ve,t)}),r=()=>t.push({name:w.home});return{prepare:s,rest:c,work:a,cycles:i,handleSave:r}}});s("8cad");_e.render=oe;var ge=_e;const ke=Object(O["a"])({history:Object(O["b"])("/tabata/"),routes:[{path:"/",name:w.home,component:Z},{path:"/settings/",name:w.settings,component:ge}]});function Ce(e){return localStorage.getItem(e)}function we(e,t){localStorage.setItem(e,t)}const qe={prepare:"prepare",rest:"rest",work:"work",cycles:"cycles"},Se=Object(y["a"])({state:()=>{const e=Ce(qe.prepare),t=Ce(qe.rest),s=Ce(qe.work),n=Ce(qe.cycles);return{prepare:null!==e?Number.parseInt(e,10):2,rest:null!==t?Number.parseInt(t,10):20,work:null!==s?Number.parseInt(s,10):30,cycles:null!==n?Number.parseInt(n,10):8}},mutations:{[fe](e,t){e.prepare=t,we(qe.prepare,t.toString())},[he](e,t){e.rest=t,we(qe.rest,t.toString())},[ye](e,t){e.work=t,we(qe.work,t.toString())},[ve](e,t){e.cycles=t,we(qe.cycles,t.toString())}}});s("f95d");Object(n["b"])(r).use(d).use(ke).use(Se).mount("#app")},cf4a:function(e,t,s){"use strict";s("b356")},d8fe:function(e,t,s){"use strict";s("bd34")},e081:function(e,t,s){},e202:function(e,t,s){"use strict";s("7429")},f8f5:function(e,t,s){},f95d:function(e,t,s){}});