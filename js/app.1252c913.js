(function(e){function t(t){for(var c,r,i=t[0],o=t[1],l=t[2],b=0,m=[];b<i.length;b++)r=i[b],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],c=!0,i=1;i<n.length;i++){var o=n[i];0!==s[o]&&(c=!1)}c&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var c={},s={app:0},a=[];function r(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=c,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)r.d(n,c,function(t){return e[t]}.bind(null,c));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/tabata/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=o;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"042c":function(e,t,n){},"3dcc":function(e,t,n){},"520f":function(e,t,n){"use strict";n("f8f5")},"5ac1":function(e,t,n){},"5af8":function(e,t,n){},"6de2":function(e,t,n){"use strict";n("c360")},7429:function(e,t,n){},7704:function(e){e.exports=JSON.parse('{"home":{"total_time":"Общее время","cycles":"Раунды"},"settings":{"title":"Настройки","cycles":"Кругов"},"not-found":{"title":"Страница не существует","go-to-home":"Перейти на главную"},"states":{"prepare":"Подготовка","rest":"Отдых","work":"Работа","pause":"Пауза"},"actions":{"close":"Закрыть","start":"Старт","pause":"Пауза","stop":"Стоп","settings":"Настройки","resume":"Продолжить"},"time_unit":"сек."}')},"8cad":function(e,t,n){"use strict";n("e081")},a02d:function(e,t,n){"use strict";n("5af8")},a12b:function(e,t,n){"use strict";n("5ac1")},b356:function(e,t,n){},b36c:function(e,t,n){"use strict";n("3dcc")},bb60:function(e,t,n){"use strict";n("042c")},bd34:function(e,t,n){},c360:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var c=n("7a23");function s(e){const t={};return Object.entries(e).forEach(([e,n])=>{"object"===typeof n&&null!==n&&Object.entries(s(n)).forEach(([n,c])=>{t[e+"."+n]=c}),"string"===typeof n&&(t[e]=n)}),t}var a=n("7704");const r=s(a),i=e=>null!=r[e]?r[e]:e,o=()=>({t:i});var l=n("c1ee");function u(e){return localStorage.getItem(e)}function b(e,t){localStorage.setItem(e,t)}var m,j=n("c61a");(function(e){e["home"]="home",e["settings"]="settings"})(m||(m={}));const p={[m.home]:"/",[m.settings]:"/settings/"},O=Object(j["a"])([[p.home,()=>({page:m.home})],[p.settings,()=>({page:m.settings})]]);function f(e,t){switch(!0){case e>t.max:return t.max;case e<t.min:return t.min;default:return e}}var d;(function(e){e[e["changePrepare"]=0]="changePrepare",e[e["changeRest"]=1]="changeRest",e[e["changeWork"]=2]="changeWork",e[e["changeCycles"]=3]="changeCycles"})(d||(d={}));const h={prepare:"prepare",rest:"rest",work:"work",cycles:"cycles"},g={min:0,max:6e4},_={min:0,max:50},y=e=>{const t=u(h.prepare),n=u(h.rest),c=u(h.work),s=u(h.cycles);e.on("@init",()=>({prepare:null!==t?f(Number.parseInt(t),g):2,rest:null!==n?f(Number.parseInt(n),g):20,work:null!==c?f(Number.parseInt(c),g):30,cycles:null!==s?f(Number.parseInt(s),_):8})),e.on(d.changePrepare,(e,t)=>{const n=f(t,g);return b(h.prepare,n.toString()),{prepare:n}}),e.on(d.changeWork,(e,t)=>{const n=f(t,g);return b(h.work,n.toString()),{work:n}}),e.on(d.changeRest,(e,t)=>{const n=f(t,g);return b(h.rest,n.toString()),{rest:n}}),e.on(d.changeCycles,(e,t)=>{const n=f(t,_);return b(h.cycles,n.toString()),{cycles:n}})},v=Object(l["a"])([y,O]),k=Object(c["i"])(v.get());function w(){return{dispatch:v.dispatch,on:v.on,get state(){return k}}}v.on("@changed",(e,t)=>{Object.keys(t).forEach(e=>{"prepare"!==e&&"rest"!==e&&"work"!==e&&"cycles"!==e||(k[e]=t[e])})});const S={id:"app"};function C(e,t,n,s,a,r){const i=Object(c["l"])("home-page"),o=Object(c["l"])("settings-page"),l=Object(c["l"])("not-found-page");return Object(c["h"])(),Object(c["c"])("div",S,[e.hasVisibleHomePage?(Object(c["h"])(),Object(c["c"])(i,{key:0})):e.hasVisibleSettingsPage?(Object(c["h"])(),Object(c["c"])(o,{key:1})):(Object(c["h"])(),Object(c["c"])(l,{key:2}))])}const P={class:"home__wrap"},V={key:2,class:"home__controls"},T={key:3,class:"home__controls"};function N(e,t,n,s,a,r){const i=Object(c["l"])("home-time-info"),o=Object(c["l"])("home-timer"),l=Object(c["l"])("base-button");return Object(c["h"])(),Object(c["c"])("div",{class:e.classes},[Object(c["f"])("div",P,[e.hasStartTimer?Object(c["d"])("",!0):(Object(c["h"])(),Object(c["c"])(i,{key:0})),e.hasStartTimer?(Object(c["h"])(),Object(c["c"])(o,{key:1,remained:e.remained.time,"remained-cycles":e.remained.cycles,"state-machine":e.sm},null,8,["remained","remained-cycles","state-machine"])):Object(c["d"])("",!0),e.hasStartTimer?Object(c["d"])("",!0):(Object(c["h"])(),Object(c["c"])("div",V,[Object(c["f"])(l,{onClick:e.handleClickSettings},{default:Object(c["n"])(()=>[Object(c["e"])(Object(c["m"])(e.i18n.t("actions.settings")),1)]),_:1},8,["onClick"]),Object(c["f"])(l,{onClick:e.handleClickStart},{default:Object(c["n"])(()=>[Object(c["e"])(Object(c["m"])(e.i18n.t("actions.start")),1)]),_:1},8,["onClick"])])),e.hasStartTimer?(Object(c["h"])(),Object(c["c"])("div",T,[e.hasPauseTimer?(Object(c["h"])(),Object(c["c"])(l,{key:0,onClick:e.handleClickTogglePause},{default:Object(c["n"])(()=>[Object(c["e"])(Object(c["m"])(e.i18n.t("actions.resume")),1)]),_:1},8,["onClick"])):(Object(c["h"])(),Object(c["c"])(l,{key:1,"is-gray":"",onClick:e.handleClickTogglePause},{default:Object(c["n"])(()=>[Object(c["e"])(Object(c["m"])(e.i18n.t("actions.pause")),1)]),_:1},8,["onClick"])),Object(c["f"])(l,{onClick:e.handleClickStop},{default:Object(c["n"])(()=>[Object(c["e"])(Object(c["m"])(e.i18n.t("actions.stop")),1)]),_:1},8,["onClick"])])):Object(c["d"])("",!0)])],2)}function I(e,t,n,s,a,r){return Object(c["h"])(),Object(c["c"])("button",{class:e.classes,onClick:t[1]||(t[1]=(...t)=>e.handleClick(...t))},[Object(c["k"])(e.$slots,"default")],2)}var B=Object(c["g"])({name:"BaseButton",props:{isGray:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const n=Object(c["a"])(()=>({"base-button":!0,"base-button_gray":e.isGray})),s=()=>t("click");return{classes:n,handleClick:s}}});n("a02d");B.render=I;var x,H=B;(function(e){e[e["init"]=0]="init",e[e["pause"]=1]="pause",e[e["prepare"]=2]="prepare",e[e["work"]=3]="work",e[e["rest"]=4]="rest"})(x||(x={}));class M{constructor(){this._state=x.init,this._prevState=x.init}transition(e){this._prevState=this._state,this._state=e}reset(){this._state=x.init,this._prevState=x.init}get state(){return this._state}get prevState(){return this._prevState}}const F={class:"home-time-info"},K={class:"home-time-info__list"},q={class:"home-time-info__item"},R={class:"home-time-info__item"},U={class:"home-time-info__item"},W={class:"home-time-info__item"},D={class:"home-time-info__total"},E={class:"home-time-info__duration"};function J(e,t,n,s,a,r){return Object(c["h"])(),Object(c["c"])("div",F,[Object(c["f"])("ul",K,[Object(c["f"])("li",q,Object(c["m"])(e.i18n.t("states.prepare"))+": "+Object(c["m"])(e.state.prepare)+" "+Object(c["m"])(e.i18n.t("time_unit")),1),Object(c["f"])("li",R,Object(c["m"])(e.i18n.t("states.rest"))+": "+Object(c["m"])(e.state.rest)+" "+Object(c["m"])(e.i18n.t("time_unit")),1),Object(c["f"])("li",U,Object(c["m"])(e.i18n.t("states.work"))+": "+Object(c["m"])(e.state.work)+" "+Object(c["m"])(e.i18n.t("time_unit")),1),Object(c["f"])("li",W,Object(c["m"])(e.i18n.t("settings.cycles"))+": "+Object(c["m"])(e.state.cycles),1)]),Object(c["f"])("div",D,[Object(c["e"])(Object(c["m"])(e.i18n.t("home.total_time"))+": ",1),Object(c["f"])("div",E,Object(c["m"])(e.totalFormatTime),1)])])}function $(e){const t=Math.floor(e/60),n=Math.round(e-60*t),c=t<10?"0"+t:t,s=n<10?"0"+n:n;return[c,s].join(":")}var G=Object(c["g"])({name:"HomeTimeInfo",setup(){const e=w(),t=o(),n=Object(c["a"])(()=>e.state.prepare+e.state.rest*e.state.cycles+e.state.work*e.state.cycles),s=Object(c["a"])(()=>$(n.value));return{i18n:t,total:n,totalFormatTime:s,state:e.state}}});n("520f");G.render=J;var L=G;const z={class:"home-timer"},A={class:"home-timer__title"},Q={class:"home-timer__remained"};function X(e,t,n,s,a,r){const i=Object(c["l"])("home-timer-cycles");return Object(c["h"])(),Object(c["c"])("div",z,[Object(c["f"])("div",A,Object(c["m"])(e.title),1),Object(c["f"])("div",Q,Object(c["m"])(e.remainedFormatTime),1),Object(c["f"])(i,{keep:e.keepCycles,total:e.cycles},null,8,["keep","total"])])}const Y={class:"home-timer-cycles"},Z={class:"home-timer-cycles__title"},ee={class:"home-timer-cycles__keep"},te={class:"home-timer-cycles__total"};function ne(e,t,n,s,a,r){return Object(c["h"])(),Object(c["c"])("div",Y,[Object(c["f"])("div",Z,Object(c["m"])(e.title)+":",1),Object(c["f"])("span",ee,Object(c["m"])(e.keep),1),Object(c["f"])("span",te,"/"+Object(c["m"])(e.total),1)])}var ce=Object(c["g"])({name:"HomeTimerCycles",props:{keep:{type:Number,required:!0},total:{type:Number,required:!0}},setup(){const e=o(),t=e.t("home.cycles");return{title:t}}});n("e202");ce.render=ne;var se=ce,ae=Object(c["g"])({name:"HomeTimer",components:{HomeTimerCycles:se},props:{remained:{type:Number,required:!0},remainedCycles:{type:Number,required:!0},stateMachine:{type:M,required:!0}},setup(e){const t=o(),n=w(),s=Object(c["a"])(()=>n.state.cycles-e.remainedCycles),a=Object(c["a"])(()=>$(e.remained)),r=Object(c["a"])(()=>{switch(e.stateMachine.state){case x.prepare:return t.t("states.prepare");case x.work:return t.t("states.work");case x.rest:return t.t("states.rest");default:return t.t("states.pause")}});return{keepCycles:s,remainedFormatTime:a,title:r,cycles:n.state.cycles}}});n("a12b");ae.render=X;var re=ae;const ie=1e3;var oe=Object(c["g"])({name:"Home",components:{BaseButton:H,HomeTimeInfo:L,HomeTimer:re},setup(){const e=o(),t=w(),{prepare:n,rest:s,work:a,cycles:r}=t.state;let i;const l=Object(c["i"])(new M),u=Object(c["i"])({time:0,cycles:0}),b=Object(c["a"])(()=>l.state!==x.init),m=Object(c["a"])(()=>l.state===x.pause),O=Object(c["a"])(()=>({home:!0,home_start:l.state!==x.init,home_work:l.state===x.work,home_rest:l.state===x.rest}));function f(){if(u.time-=1,!(u.time>0)){if(l.state===x.work)return u.time=s,void l.transition(x.rest);u.time=a,u.cycles-=1,l.transition(x.work),u.cycles<0&&g()}}function d(){i=setInterval(f,ie)}function h(){clearInterval(i)}function g(){l.reset(),h()}const _=()=>{l.transition(x.init),t.dispatch(j["d"],p.settings)},y=()=>{l.transition(x.prepare),u.time=n,u.cycles=r,d()},v=()=>{if(l.state===x.pause)return l.transition(l.prevState),void d();l.transition(x.pause),h()};return{i18n:e,sm:l,remained:u,hasStartTimer:b,hasPauseTimer:m,classes:O,handleClickSettings:_,handleClickStart:y,handleClickStop:g,handleClickTogglePause:v}}});n("bb60");oe.render=N;var le=oe;const ue={class:"not-found"},be={class:"not-found__wrap"},me={class:"not-found__header"},je={href:"/"};function pe(e,t,n,s,a,r){return Object(c["h"])(),Object(c["c"])("div",ue,[Object(c["f"])("div",be,[Object(c["f"])("h1",me,Object(c["m"])(e.i18n.t("not-found.title")),1),Object(c["f"])("a",je,Object(c["m"])(e.i18n.t("not-found.go-to-home")),1)])])}var Oe=Object(c["g"])({setup(){const e=o();return{i18n:e}}});n("6de2");Oe.render=pe;var fe=Oe;const de={class:"settings"},he={class:"settings__wrap"},ge={class:"settings__title"},_e={class:"settings__main"},ye={class:"settings__note"},ve={class:"settings__note"},ke={class:"settings__note"},we={class:"settings__controls"};function Se(e,t,n,s,a,r){const i=Object(c["l"])("base-input-number"),o=Object(c["l"])("base-field"),l=Object(c["l"])("base-button");return Object(c["h"])(),Object(c["c"])("div",de,[Object(c["f"])("div",he,[Object(c["f"])("h1",ge,Object(c["m"])(e.i18n.t("settings.title")),1),Object(c["f"])("div",_e,[Object(c["f"])(o,{class:"settings__field"},{label:Object(c["n"])(()=>[Object(c["e"])(Object(c["m"])(e.i18n.t("states.prepare")),1),Object(c["f"])("span",ye,", "+Object(c["m"])(e.i18n.t("time_unit")),1)]),default:Object(c["n"])(()=>[Object(c["f"])(i,{modelValue:e.prepare,"onUpdate:modelValue":t[1]||(t[1]=t=>e.prepare=t)},null,8,["modelValue"])]),_:1}),Object(c["f"])(o,{class:"settings__field"},{label:Object(c["n"])(()=>[Object(c["e"])(Object(c["m"])(e.i18n.t("states.rest")),1),Object(c["f"])("span",ve,", "+Object(c["m"])(e.i18n.t("time_unit")),1)]),default:Object(c["n"])(()=>[Object(c["f"])(i,{modelValue:e.rest,"onUpdate:modelValue":t[2]||(t[2]=t=>e.rest=t)},null,8,["modelValue"])]),_:1}),Object(c["f"])(o,{class:"settings__field"},{label:Object(c["n"])(()=>[Object(c["e"])(Object(c["m"])(e.i18n.t("states.work")),1),Object(c["f"])("span",ke,", "+Object(c["m"])(e.i18n.t("time_unit")),1)]),default:Object(c["n"])(()=>[Object(c["f"])(i,{modelValue:e.work,"onUpdate:modelValue":t[3]||(t[3]=t=>e.work=t)},null,8,["modelValue"])]),_:1}),Object(c["f"])(o,{class:"settings__field"},{label:Object(c["n"])(()=>[Object(c["e"])(Object(c["m"])(e.i18n.t("settings.cycles")),1)]),default:Object(c["n"])(()=>[Object(c["f"])(i,{modelValue:e.cycles,"onUpdate:modelValue":t[4]||(t[4]=t=>e.cycles=t)},null,8,["modelValue"])]),_:1})]),Object(c["f"])("div",we,[Object(c["f"])(l,{onClick:e.handleSave},{default:Object(c["n"])(()=>[Object(c["e"])(Object(c["m"])(e.i18n.t("actions.close")),1)]),_:1},8,["onClick"])])])])}const Ce={class:"base-field"},Pe={class:"base-field__label"};function Ve(e,t,n,s,a,r){return Object(c["h"])(),Object(c["c"])("label",Ce,[Object(c["f"])("span",Pe,[Object(c["k"])(e.$slots,"label")]),Object(c["k"])(e.$slots,"default")])}var Te=Object(c["g"])({name:"BaseField"});n("b36c");Te.render=Ve;var Ne=Te;function Ie(e,t,n,s,a,r){return Object(c["h"])(),Object(c["c"])("input",{ref:"input",value:e.modelValue,type:"number",autocomplete:"off",class:"base-input-number",onInput:t[1]||(t[1]=(...t)=>e.handleInput(...t)),onKeydown:t[2]||(t[2]=(...t)=>e.handleKeydown(...t)),onBlur:t[3]||(t[3]=(...t)=>e.handleBlur(...t))},null,40,["value"])}const Be=1;var xe=Object(c["g"])({name:"BaseInputNumber",props:{modelValue:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=Object(c["j"])(null),s=e=>t("update:modelValue",e),a=()=>s(e.modelValue+Be),r=()=>s(e.modelValue-Be);function i(e){const t=/\d+/.exec(e.target.value);null!==t&&s(Number.parseInt(t[0],10))}function o(e){const t=e.key.toLowerCase();return"arrowup"===t||"up"===t?(a(),void e.preventDefault()):"arrowdown"===t||"down"===t?(r(),void e.preventDefault()):void("e"!==t||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault())}function l(){null!==n.value&&(n.value.value=e.modelValue.toString())}return{input:n,handleInput:i,handleKeydown:o,handleBlur:l}}});n("cf4a");xe.render=Ie;var He=xe,Me=Object(c["g"])({name:"Settings",components:{BaseButton:H,BaseField:Ne,BaseInputNumber:He},setup(){const e=w(),t=o(),n=Object(c["a"])({get:()=>e.state.prepare,set:t=>e.dispatch(d.changePrepare,t)}),s=Object(c["a"])({get:()=>e.state.rest,set:t=>e.dispatch(d.changeRest,t)}),a=Object(c["a"])({get:()=>e.state.work,set:t=>e.dispatch(d.changeWork,t)}),r=Object(c["a"])({get:()=>e.state.cycles,set:t=>e.dispatch(d.changeCycles,t)}),i=()=>e.dispatch(j["d"],p.home);return{i18n:t,prepare:n,rest:s,work:a,cycles:r,handleSave:i}}});n("8cad");Me.render=Se;var Fe=Me;function Ke(){const e=Object(c["j"])(""),t=t=>{e.value=!1===t.match?"":t.match.page};return{pageName:e,setPageName:t}}var qe=Object(c["g"])({components:{HomePage:le,SettingsPage:Fe,NotFoundPage:fe},setup(){const e=w(),{pageName:t,setPageName:n}=Ke();n(e.state[j["c"]]),e.on(j["b"],(e,t)=>{n(t)});const s=Object(c["a"])(()=>t.value===m.home),a=Object(c["a"])(()=>t.value===m.settings);return{hasVisibleHomePage:s,hasVisibleSettingsPage:a}}});n("d8fe");qe.render=C;var Re=qe;n("f95d");Object(c["b"])(Re).mount("#app")},cf4a:function(e,t,n){"use strict";n("b356")},d8fe:function(e,t,n){"use strict";n("bd34")},e081:function(e,t,n){},e202:function(e,t,n){"use strict";n("7429")},f8f5:function(e,t,n){},f95d:function(e,t,n){}});